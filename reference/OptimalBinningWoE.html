<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Optimal Binning and Weight of Evidence Calculation — OptimalBinningWoE • OptimalBinningWoE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimal Binning and Weight of Evidence Calculation — OptimalBinningWoE"><meta name="description" content="This function performs optimal binning and calculates Weight of Evidence (WoE) for multiple features.
It supports automatic method selection and data preprocessing."><meta property="og:description" content="This function performs optimal binning and calculates Weight of Evidence (WoE) for multiple features.
It supports automatic method selection and data preprocessing."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OptimalBinningWoE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Optimal Binning and Weight of Evidence Calculation</h1>

      <div class="d-none name"><code>OptimalBinningWoE.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function performs optimal binning and calculates Weight of Evidence (WoE) for multiple features.
It supports automatic method selection and data preprocessing.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">OptimalBinningWoE</span><span class="op">(</span></span>
<span>  <span class="va">dt</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  feature <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  preprocess <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  min_bins <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  max_bins <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  cat_cutoff <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  bin_cutoff <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dt">dt<a class="anchor" aria-label="anchor" href="#arg-dt"></a></dt>
<dd><p>A data.table containing the dataset.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>The name of the target variable (must be binary).</p></dd>


<dt id="arg-feature">feature<a class="anchor" aria-label="anchor" href="#arg-feature"></a></dt>
<dd><p>Optional. Name of a specific feature to process. If NULL, all features except the target will be processed.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>The binning method to use. Can be "auto" or a specific method name. See Details for more information.</p></dd>


<dt id="arg-preprocess">preprocess<a class="anchor" aria-label="anchor" href="#arg-preprocess"></a></dt>
<dd><p>Logical. Whether to preprocess the data before binning.</p></dd>


<dt id="arg-min-bins">min_bins<a class="anchor" aria-label="anchor" href="#arg-min-bins"></a></dt>
<dd><p>Minimum number of bins.</p></dd>


<dt id="arg-max-bins">max_bins<a class="anchor" aria-label="anchor" href="#arg-max-bins"></a></dt>
<dd><p>Maximum number of bins.</p></dd>


<dt id="arg-cat-cutoff">cat_cutoff<a class="anchor" aria-label="anchor" href="#arg-cat-cutoff"></a></dt>
<dd><p>Cutoff for categorical variables.</p></dd>


<dt id="arg-bin-cutoff">bin_cutoff<a class="anchor" aria-label="anchor" href="#arg-bin-cutoff"></a></dt>
<dd><p>Cutoff for numeric variables.</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>A list of additional control parameters. See Details for more information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing:</p><ul><li><p>woe_feature: The original dataset with added WoE columns</p></li>
<li><p>woe_woebins: Information about the bins created</p></li>
<li><p>prep_report: Preprocessing report for each feature</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Supported Algorithms:
The function supports the following binning algorithms:</p><ul><li><p>CAIM (Class-Attribute Interdependence Maximization):
Applicable to both categorical and numeric variables.
It maximizes the class-attribute interdependence to find optimal bins.
- Categorical: OptimalBinningCategoricalCAIM
- Numeric: OptimalBinningNumericCAIM</p></li>
<li><p>ChiMerge:
Applicable to both categorical and numeric variables.
It uses chi-square statistic to iteratively merge adjacent intervals until a stopping criterion is met.
- Categorical: OptimalBinningCategoricalChiMerge
- Numeric: OptimalBinningNumericChiMerge</p></li>
<li><p>MDLP (Minimum Description Length Principle):
Applicable to both categorical and numeric variables.
It uses the principle of minimum description length to find the optimal splitting points.
- Categorical: OptimalBinningCategoricalMDLP
- Numeric: OptimalBinningNumericMDLP</p></li>
<li><p>MIP (Minimum Information Pure):
Applicable to both categorical and numeric variables.
It aims to minimize the impurity of information within each bin.
- Categorical: OptimalBinningCategoricalMIP
- Numeric: OptimalBinningNumericMIP</p></li>
<li><p>MOB (Monotone Optimal Binning):
Applicable to both categorical and numeric variables.
It ensures monotonicity in the binning process while optimizing a chosen metric.
- Categorical: OptimalBinningCategoricalMOB
- Numeric: OptimalBinningNumericMOB</p></li>
<li><p>IV (Information Value):
Applicable only to categorical variables.
It bins categories based on their information value with respect to the target variable.
- Categorical: OptimalBinningCategoricalIV</p></li>
<li><p>PAVA (Pool Adjacent Violators Algorithm):
Applicable only to numeric variables.
It ensures monotonicity in the binning process by pooling adjacent bins that violate the monotonicity constraint.
- Numeric: OptimalBinningNumericPAVA</p></li>
<li><p>Tree-based binning:
Applicable only to numeric variables.
It uses decision tree algorithms to create bins, allowing for more flexible and potentially non-linear binning.
- Numeric: OptimalBinningNumericTree</p></li>
</ul><p>Each algorithm has its own strengths and may perform differently depending on the nature of the data.
The automatic method selection option tests applicable algorithms and chooses the one that produces the highest Information Value.</p>
<p>When specifying a method, use the short name (e.g., "caim", "chimerge") rather than the full algorithm name.
Control Parameters:
The control list can include the following parameters:</p><ul><li><p>min_bads: Minimum proportion of "bad" cases in each bin (default: 0.05)</p></li>
<li><p>pvalue_threshold: P-value threshold for statistical tests (default: 0.05)</p></li>
<li><p>max_n_prebins: Maximum number of pre-bins before optimization (default: 20)</p></li>
<li><p>monotonicity_direction: Direction of monotonicity ("increase" or "decrease") (default: "increase")</p></li>
<li><p>lambda: Regularization parameter for tree-based methods (default: 0.1)</p></li>
<li><p>min_bin_size: Minimum proportion of cases in each bin (default: 0.05)</p></li>
<li><p>min_iv_gain: Minimum IV gain for creating a new split (default: 0.01)</p></li>
<li><p>max_depth: Maximum depth for tree-based methods (default: 10)</p></li>
<li><p>num_miss_value: Value to represent missing numeric values (default: -999.0)</p></li>
<li><p>char_miss_value: Value to represent missing categorical values (default: "N/A")</p></li>
<li><p>outlier_method: Method for outlier detection ("iqr", "zscore", or "grubbs") (default: "iqr")</p></li>
<li><p>outlier_process: Whether to process outliers (default: FALSE)</p></li>
<li><p>iqr_k: Factor for IQR method (default: 1.5)</p></li>
<li><p>zscore_threshold: Threshold for Z-score method (default: 3)</p></li>
<li><p>grubbs_alpha: Significance level for Grubbs' test (default: 0.05)</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Load necessary libraries</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a sample dataset</span></span></span>
<span class="r-in"><span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  num_feat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cat_feat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run OptimalBinningWoE with automatic method selection</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">OptimalBinningWoE</span><span class="op">(</span><span class="va">dt</span>, target <span class="op">=</span> <span class="st">"target"</span>, method <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check the results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">woe_feature</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">woe_woebins</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">prep_report</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

