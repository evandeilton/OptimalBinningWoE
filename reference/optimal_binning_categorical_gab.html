<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Categorical Optimal Binning with Genetic Algorithm — optimal_binning_categorical_gab • OptimalBinningWoE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Categorical Optimal Binning with Genetic Algorithm — optimal_binning_categorical_gab"><meta name="description" content="Implements optimal binning for categorical variables using a Genetic Algorithm approach,
calculating Weight of Evidence (WoE) and Information Value (IV)."><meta property="og:description" content="Implements optimal binning for categorical variables using a Genetic Algorithm approach,
calculating Weight of Evidence (WoE) and Information Value (IV)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OptimalBinningWoE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cm_paper.html">Optimal Binning Using the ChiMerge Algorithm (CM)</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Categorical Optimal Binning with Genetic Algorithm</h1>

      <div class="d-none name"><code>optimal_binning_categorical_gab.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Implements optimal binning for categorical variables using a Genetic Algorithm approach,
calculating Weight of Evidence (WoE) and Information Value (IV).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">optimal_binning_categorical_gab</span><span class="op">(</span></span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">feature</span>,</span>
<span>  min_bins <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  max_bins <span class="op">=</span> <span class="fl">5L</span>,</span>
<span>  bin_cutoff <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  max_n_prebins <span class="op">=</span> <span class="fl">20L</span>,</span>
<span>  population_size <span class="op">=</span> <span class="fl">100L</span>,</span>
<span>  num_generations <span class="op">=</span> <span class="fl">100L</span>,</span>
<span>  mutation_rate <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  crossover_rate <span class="op">=</span> <span class="fl">0.8</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>Integer vector of binary target values (0 or 1).</p></dd>


<dt id="arg-feature">feature<a class="anchor" aria-label="anchor" href="#arg-feature"></a></dt>
<dd><p>Character vector of categorical feature values.</p></dd>


<dt id="arg-min-bins">min_bins<a class="anchor" aria-label="anchor" href="#arg-min-bins"></a></dt>
<dd><p>Minimum number of bins (default: 2).</p></dd>


<dt id="arg-max-bins">max_bins<a class="anchor" aria-label="anchor" href="#arg-max-bins"></a></dt>
<dd><p>Maximum number of bins (default: 5).</p></dd>


<dt id="arg-bin-cutoff">bin_cutoff<a class="anchor" aria-label="anchor" href="#arg-bin-cutoff"></a></dt>
<dd><p>Minimum frequency for a separate bin (default: 0.05).</p></dd>


<dt id="arg-max-n-prebins">max_n_prebins<a class="anchor" aria-label="anchor" href="#arg-max-n-prebins"></a></dt>
<dd><p>Maximum number of pre-bins before merging (default: 20).</p></dd>


<dt id="arg-population-size">population_size<a class="anchor" aria-label="anchor" href="#arg-population-size"></a></dt>
<dd><p>Size of the genetic algorithm population (default: 100).</p></dd>


<dt id="arg-num-generations">num_generations<a class="anchor" aria-label="anchor" href="#arg-num-generations"></a></dt>
<dd><p>Number of generations for the genetic algorithm (default: 100).</p></dd>


<dt id="arg-mutation-rate">mutation_rate<a class="anchor" aria-label="anchor" href="#arg-mutation-rate"></a></dt>
<dd><p>Probability of mutation for each gene (default: 0.01).</p></dd>


<dt id="arg-crossover-rate">crossover_rate<a class="anchor" aria-label="anchor" href="#arg-crossover-rate"></a></dt>
<dd><p>Probability of crossover between parents (default: 0.8).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with three elements:</p><ul><li><p>woefeature: Numeric vector of WoE values for each input feature value.</p></li>
<li><p>woebin: Data frame with binning results (bin names, WoE, IV, counts).</p></li>
<li><p>total_iv: Total Information Value across all bins.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The algorithm employs a Genetic Algorithm (GA) to identify an optimal binning solution for categorical variables.
It evolves a population of binning solutions over multiple generations, utilizing selection, crossover, and mutation operations
to maximize the overall Information Value (IV) while adhering to constraints on the number of bins and ensuring monotonicity
of WoE values across bins.</p>
<p><strong>Key Steps of the Genetic Algorithm:</strong></p><ol><li><p><strong>Initialization</strong>: Generate an initial population of binning solutions with random assignments, ensuring that the minimum number of bins (<code>min_bins</code>) is met.</p></li>
<li><p><strong>Fitness Evaluation</strong>: Calculate the fitness of each individual in the population based on the sum of IVs across all bins.</p></li>
<li><p><strong>Selection</strong>: Select parent individuals for reproduction using tournament selection, favoring individuals with higher fitness.</p></li>
<li><p><strong>Crossover</strong>: Perform single-point crossover between pairs of parents to produce offspring, exchanging segments of their chromosomes.</p></li>
<li><p><strong>Mutation</strong>: Introduce random mutations in the offspring's chromosomes with a probability defined by <code>mutation_rate</code>, altering bin assignments to maintain genetic diversity.</p></li>
<li><p><strong>Replacement</strong>: Form a new population from the offspring, maintaining the population size.</p></li>
<li><p><strong>Termination</strong>: Repeat the evaluation, selection, crossover, and mutation steps for a specified number of generations (<code>num_generations</code>) or until convergence criteria are met.</p></li>
</ol><p><strong>Weight of Evidence (WoE):</strong>
$$WoE = \ln\left(\frac{P(X|Y=1)}{P(X|Y=0)}\right)$$
Where:</p><ul><li><p>\( P(X|Y=1) \) is the distribution of positives in bin \( X \).</p></li>
<li><p>\( P(X|Y=0) \) is the distribution of negatives in bin \( X \).</p></li>
</ul><p><strong>Information Value (IV):</strong>
$$IV = \sum_{i=1}^{N} (P(X_i|Y=1) - P(X_i|Y=0)) \times WoE_i$$
The IV measures the predictive power of the binned feature, with higher values indicating stronger predictive capability.</p>
<p><strong>Numerical Stability and Edge Case Handling:</strong>
The algorithm incorporates smoothing techniques by adding a small constant (e.g., 10^-10) to distributions to prevent division by zero and taking the logarithm of zero.
It also ensures that each bin has positive and negative counts, except in cases where the target variable lacks sufficient cases for a particular category.
All final bins consist solely of original unique category values concatenated with a "+" delimiter, preserving category integrity without introducing "Others" or "Rare" bins.</p>
<p><strong>Monotonicity Enforcement:</strong>
While the Genetic Algorithm inherently promotes higher IV through selection and reproduction, additional mechanisms can be integrated to enforce monotonicity of WoE values across bins when feasible. This ensures that the relationship between the feature and the target remains consistent and interpretable.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Beltrami, M., Mach, M., &amp; Dall'Aglio, M. (2021). Monotonic Optimal Binning Algorithm for Credit Risk Modeling. <em>Risks</em>, 9(3), 58.</p></li>
<li><p>Siddiqi, N. (2006). <em>Credit risk scorecards: developing and implementing intelligent credit scoring</em> (Vol. 3). John Wiley &amp; Sons.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Lopes, J. E.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Sample data</span></span></span>
<span class="r-in"><span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feature</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"C"</span>, <span class="st">"B"</span>, <span class="st">"D"</span>, <span class="st">"C"</span>, <span class="st">"A"</span>, <span class="st">"D"</span>, <span class="st">"B"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run optimal binning</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">optimal_binning_categorical_gab</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">target</span>, </span></span>
<span class="r-in"><span>  <span class="va">feature</span>, </span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">2</span>, </span></span>
<span class="r-in"><span>  max_bins <span class="op">=</span> <span class="fl">4</span>, </span></span>
<span class="r-in"><span>  bin_cutoff <span class="op">=</span> <span class="fl">0.05</span>, </span></span>
<span class="r-in"><span>  max_n_prebins <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  population_size <span class="op">=</span> <span class="fl">100</span>, </span></span>
<span class="r-in"><span>  num_generations <span class="op">=</span> <span class="fl">100</span>, </span></span>
<span class="r-in"><span>  mutation_rate <span class="op">=</span> <span class="fl">0.01</span>, </span></span>
<span class="r-in"><span>  crossover_rate <span class="op">=</span> <span class="fl">0.8</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View binning results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">woebin</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View WoE values assigned to each feature value</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">woefeature</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View total Information Value</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">total_iv</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

