<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Optimal Binning for Categorical Variables using Information Value Dynamic Programming — ob_categorical_ivb • OptimalBinningWoE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimal Binning for Categorical Variables using Information Value Dynamic Programming — ob_categorical_ivb"><meta name="description" content="Performs supervised discretization of categorical variables using a dynamic
programming algorithm specifically designed to maximize total Information
Value (IV). This implementation employs Bayesian smoothing for numerical
stability, maintains monotonic Weight of Evidence constraints, and uses
efficient caching strategies for optimal performance with high-cardinality
features."><meta property="og:description" content="Performs supervised discretization of categorical variables using a dynamic
programming algorithm specifically designed to maximize total Information
Value (IV). This implementation employs Bayesian smoothing for numerical
stability, maintains monotonic Weight of Evidence constraints, and uses
efficient caching strategies for optimal performance with high-cardinality
features."><meta property="og:image" content="https://evandeilton.github.io/OptimalBinningWoE/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OptimalBinningWoE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">OptimalBinningWoE: Practical Guide for Credit Risk Modeling</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/evandeilton/OptimalBinningWoE/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Optimal Binning for Categorical Variables using Information Value Dynamic Programming</h1>
      <small class="dont-index">Source: <a href="https://github.com/evandeilton/OptimalBinningWoE/blob/v1.0.7/R/obc_ivb.R" class="external-link"><code>R/obc_ivb.R</code></a></small>
      <div class="d-none name"><code>ob_categorical_ivb.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Performs supervised discretization of categorical variables using a dynamic
programming algorithm specifically designed to maximize total Information
Value (IV). This implementation employs Bayesian smoothing for numerical
stability, maintains monotonic Weight of Evidence constraints, and uses
efficient caching strategies for optimal performance with high-cardinality
features.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ob_categorical_ivb</span><span class="op">(</span></span>
<span>  <span class="va">feature</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  min_bins <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  max_bins <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  bin_cutoff <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  max_n_prebins <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  bin_separator <span class="op">=</span> <span class="st">"%;%"</span>,</span>
<span>  convergence_threshold <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  max_iterations <span class="op">=</span> <span class="fl">1000</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-feature">feature<a class="anchor" aria-label="anchor" href="#arg-feature"></a></dt>
<dd><p>A character vector or factor representing the categorical
predictor variable to be binned. Missing values are automatically
converted to the category <code>"NA"</code>.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>An integer vector of binary outcomes (0/1) corresponding
to each observation in <code>feature</code>. Missing values are not permitted.</p></dd>


<dt id="arg-min-bins">min_bins<a class="anchor" aria-label="anchor" href="#arg-min-bins"></a></dt>
<dd><p>Integer. Minimum number of bins to produce. Must be &gt;= 2.
The algorithm searches for solutions within [<code>min_bins</code>, <code>max_bins</code>]
that maximize total IV. Defaults to 3.</p></dd>


<dt id="arg-max-bins">max_bins<a class="anchor" aria-label="anchor" href="#arg-max-bins"></a></dt>
<dd><p>Integer. Maximum number of bins to produce. Must be &gt;=
<code>min_bins</code>. Defines the upper bound of the search space. Defaults to 5.</p></dd>


<dt id="arg-bin-cutoff">bin_cutoff<a class="anchor" aria-label="anchor" href="#arg-bin-cutoff"></a></dt>
<dd><p>Numeric. Minimum proportion of total observations required
for a category to remain separate. Categories below this threshold are
pre-merged before the optimization phase. Must be in (0, 1). Defaults to 0.05.</p></dd>


<dt id="arg-max-n-prebins">max_n_prebins<a class="anchor" aria-label="anchor" href="#arg-max-n-prebins"></a></dt>
<dd><p>Integer. Maximum number of initial bins before dynamic
programming optimization. Controls computational complexity for high-cardinality
features. Must be &gt;= 2. Defaults to 20.</p></dd>


<dt id="arg-bin-separator">bin_separator<a class="anchor" aria-label="anchor" href="#arg-bin-separator"></a></dt>
<dd><p>Character string used to concatenate category names
when multiple categories are merged into a single bin. Defaults to "%;%".</p></dd>


<dt id="arg-convergence-threshold">convergence_threshold<a class="anchor" aria-label="anchor" href="#arg-convergence-threshold"></a></dt>
<dd><p>Numeric. Convergence tolerance for the iterative
optimization process based on IV change. Algorithm stops when
\(|\Delta IV| &lt;\) <code>convergence_threshold</code>. Must be &gt; 0. Defaults to 1e-6.</p></dd>


<dt id="arg-max-iterations">max_iterations<a class="anchor" aria-label="anchor" href="#arg-max-iterations"></a></dt>
<dd><p>Integer. Maximum number of optimization iterations.
Prevents excessive computation. Must be &gt; 0. Defaults to 1000.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing the binning results with the following components:</p><dl><dt><code>id</code></dt>
<dd><p>Integer vector of bin identifiers (1-indexed)</p></dd>

    <dt><code>bin</code></dt>
<dd><p>Character vector of bin labels (merged category names)</p></dd>

    <dt><code>woe</code></dt>
<dd><p>Numeric vector of Weight of Evidence values per bin</p></dd>

    <dt><code>iv</code></dt>
<dd><p>Numeric vector of Information Value contribution per bin</p></dd>

    <dt><code>count</code></dt>
<dd><p>Integer vector of total observations per bin</p></dd>

    <dt><code>count_pos</code></dt>
<dd><p>Integer vector of positive cases (target=1) per bin</p></dd>

    <dt><code>count_neg</code></dt>
<dd><p>Integer vector of negative cases (target=0) per bin</p></dd>

    <dt><code>total_iv</code></dt>
<dd><p>Numeric total Information Value of the binning solution</p></dd>

    <dt><code>converged</code></dt>
<dd><p>Logical indicating algorithm convergence</p></dd>

    <dt><code>iterations</code></dt>
<dd><p>Integer count of optimization iterations performed</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The Information Value Binning (IVB) algorithm uses dynamic programming to
find the globally optimal binning solution that maximizes total IV subject
to constraints on bin count and monotonicity.</p>
<p><strong>Algorithm Workflow:</strong></p><ol><li><p>Input validation and preprocessing</p></li>
<li><p>Single-pass category counting and statistics computation</p></li>
<li><p>Rare category pre-merging (frequencies &lt; <code>bin_cutoff</code>)</p></li>
<li><p>Pre-bin limitation (if categories &gt; <code>max_n_prebins</code>)</p></li>
<li><p>Category sorting by event rate</p></li>
<li><p>Cumulative statistics cache initialization</p></li>
<li><p>Dynamic programming table computation:</p><ul><li><p>State: \(DP[i][k]\) = max IV using first \(i\) categories in \(k\) bins</p></li>
<li><p>Transition: \(DP[i][k] = \max_j \{DP[j][k-1] + IV(j+1, i)\}\)</p></li>
<li><p>Banded optimization to skip infeasible splits</p></li>
</ul></li>
<li><p>Backtracking to reconstruct optimal bins</p></li>
<li><p>Adaptive monotonicity enforcement</p></li>
<li><p>Final metric computation with Bayesian smoothing</p></li>
</ol><p><strong>Dynamic Programming Formulation:</strong></p>
<p>Let \(DP[i][k]\) represent the maximum total IV achievable using the first
\(i\) categories (sorted by event rate) partitioned into \(k\) bins.</p>
<p><strong>Recurrence relation:</strong>
$$DP[i][k] = \max_{k-1 \leq j &lt; i} \{DP[j][k-1] + IV(j+1, i)\}$$</p>
<p><strong>Base case:</strong>
$$DP[i][1] = IV(1, i) \quad \forall i$$</p>
<p>where \(IV(j+1, i)\) is the Information Value of a bin containing categories
from \(j+1\) to \(i\).</p>
<p><strong>Bayesian Smoothing:</strong></p>
<p>To prevent numerical instability and overfitting with sparse bins, WoE and IV
are calculated using Bayesian smoothing with pseudocounts:</p>
<p>$$p'_i = \frac{n_{i,pos} + \alpha_p}{N_{pos} + \alpha_{total}}$$
$$n'_i = \frac{n_{i,neg} + \alpha_n}{N_{neg} + \alpha_{total}}$$</p>
<p>where \(\alpha_p\) and \(\alpha_n\) are prior pseudocounts proportional
to the overall event rate, and \(\alpha_{total} = 1.0\) (prior strength).</p>
<p>$$WoE_i = \ln\left(\frac{p'_i}{n'_i}\right)$$
$$IV_i = (p'_i - n'_i) \times WoE_i$$</p>
<p><strong>Adaptive Monotonicity Enforcement:</strong></p>
<p>After finding the optimal bins, the algorithm enforces WoE monotonicity by:</p><ol><li><p>Computing average WoE gap: \(\bar{\Delta} = \frac{1}{k-1}\sum_{i=1}^{k-1}|WoE_{i+1} - WoE_i|\)</p></li>
<li><p>Setting adaptive threshold: \(\tau = \min(\epsilon, 0.01\bar{\Delta})\)</p></li>
<li><p>Identifying worst violation: \(i^* = \arg\max_i \{WoE_i - WoE_{i+1}\}\)</p></li>
<li><p>Evaluating forward and backward merges by IV retention</p></li>
<li><p>Selecting merge direction that maximizes total IV</p></li>
</ol><p><strong>Computational Complexity:</strong></p><ul><li><p>Time: \(O(k^2 \cdot n)\) where \(k\) = max_bins, \(n\) = categories</p></li>
<li><p>Space: \(O(k \cdot n)\) for DP tables and cumulative caches</p></li>
<li><p>IV calculations are \(O(1)\) due to cumulative statistics caching</p></li>
</ul><p><strong>Advantages over Alternative Methods:</strong></p><ul><li><p><strong>Global optimality</strong>: Guaranteed maximum IV (within constraint space)</p></li>
<li><p><strong>Bayesian regularization</strong>: Robust to sparse bins and class imbalance</p></li>
<li><p><strong>Efficient caching</strong>: Cumulative stats and IV memoization</p></li>
<li><p><strong>Banded optimization</strong>: Reduced search space via feasibility pruning</p></li>
<li><p><strong>Adaptive monotonicity</strong>: Context-aware threshold for enforcement</p></li>
</ul><p><strong>Comparison with Related Methods:</strong></p><ul><li><p><strong>vs DP (general)</strong>: IVB specifically optimizes IV; general DP more flexible</p></li>
<li><p><strong>vs GMB</strong>: IVB guarantees optimality; GMB is faster but approximate</p></li>
<li><p><strong>vs ChiMerge</strong>: IVB uses IV criterion; ChiMerge uses chi-square</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Navas-Palencia, G. (2020). Optimal binning: mathematical programming
formulation and solution approach. <em>Expert Systems with Applications</em>,
158, 113508. <a href="https://doi.org/10.1016/j.eswa.2020.113508" class="external-link">doi:10.1016/j.eswa.2020.113508</a></p>
<p>Bellman, R. (1957). <em>Dynamic Programming</em>. Princeton University Press.</p>
<p>Siddiqi, N. (2017). <em>Intelligent Credit Scoring: Building and
Implementing Better Credit Risk Scorecards</em> (2nd ed.). Wiley.</p>
<p>Good, I. J. (1965). <em>The Estimation of Probabilities: An Essay on
Modern Bayesian Methods</em>. MIT Press.</p>
<p>Anderson, R. (2007). <em>The Credit Scoring Toolkit: Theory and Practice
for Retail Credit Risk Management and Decision Automation</em>. Oxford University Press.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ob_categorical_dp.html">ob_categorical_dp</a></code> for general dynamic programming binning,
<code><a href="ob_categorical_gmb.html">ob_categorical_gmb</a></code> for greedy merge approximation,
<code><a href="ob_categorical_cm.html">ob_categorical_cm</a></code> for ChiMerge-based binning</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Basic IV optimization with Bayesian smoothing</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n_obs</span> <span class="op">&lt;-</span> <span class="fl">1200</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulate industry sectors with varying default risk</span></span></span>
<span class="r-in"><span><span class="va">industries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"Technology"</span>, <span class="st">"Healthcare"</span>, <span class="st">"Finance"</span>, <span class="st">"Manufacturing"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Retail"</span>, <span class="st">"Energy"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">default_rates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.03</span>, <span class="fl">0.05</span>, <span class="fl">0.08</span>, <span class="fl">0.12</span>, <span class="fl">0.18</span>, <span class="fl">0.25</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cat_feature</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">industries</span>, <span class="va">n_obs</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.20</span>, <span class="fl">0.18</span>, <span class="fl">0.22</span>, <span class="fl">0.18</span>, <span class="fl">0.12</span>, <span class="fl">0.10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bin_target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">cat_feature</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="va">default_rates</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">industries</span> <span class="op">==</span> <span class="va">x</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply IVB optimization</span></span></span>
<span class="r-in"><span><span class="va">result_ivb</span> <span class="op">&lt;-</span> <span class="fu">ob_categorical_ivb</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">cat_feature</span>,</span></span>
<span class="r-in"><span>  <span class="va">bin_target</span>,</span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  max_bins <span class="op">=</span> <span class="fl">4</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Display results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Bin <span class="op">=</span> <span class="va">result_ivb</span><span class="op">$</span><span class="va">bin</span>,</span></span>
<span class="r-in"><span>  WoE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_ivb</span><span class="op">$</span><span class="va">woe</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  IV <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_ivb</span><span class="op">$</span><span class="va">iv</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Count <span class="op">=</span> <span class="va">result_ivb</span><span class="op">$</span><span class="va">count</span>,</span></span>
<span class="r-in"><span>  EventRate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_ivb</span><span class="op">$</span><span class="va">count_pos</span> <span class="op">/</span> <span class="va">result_ivb</span><span class="op">$</span><span class="va">count</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    Bin    WoE     IV Count EventRate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           Technology -1.723 0.3003   231     0.022</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Finance%;%Healthcare -0.542 0.0965   487     0.068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        Manufacturing  0.397 0.0342   223     0.157</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Retail%;%Energy  0.879 0.2311   259     0.232</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nTotal IV (maximized):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_ivb</span><span class="op">$</span><span class="va">total_iv</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total IV (maximized): 0.6621 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Converged:"</span>, <span class="va">result_ivb</span><span class="op">$</span><span class="va">converged</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Converged: TRUE </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Iterations:"</span>, <span class="va">result_ivb</span><span class="op">$</span><span class="va">iterations</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Iterations: 1 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Comparing IV optimization with other methods</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n_obs_comp</span> <span class="op">&lt;-</span> <span class="fl">1500</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"North"</span>, <span class="st">"South"</span>, <span class="st">"East"</span>, <span class="st">"West"</span>, <span class="st">"Central"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cat_feature_comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">regions</span>, <span class="va">n_obs_comp</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bin_target_comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n_obs_comp</span>, <span class="fl">1</span>, <span class="fl">0.15</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># IVB (IV-optimized)</span></span></span>
<span class="r-in"><span><span class="va">result_ivb_comp</span> <span class="op">&lt;-</span> <span class="fu">ob_categorical_ivb</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">cat_feature_comp</span>, <span class="va">bin_target_comp</span>,</span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">2</span>, max_bins <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># GMB (greedy approximation)</span></span></span>
<span class="r-in"><span><span class="va">result_gmb_comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="ob_categorical_gmb.html">ob_categorical_gmb</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">cat_feature_comp</span>, <span class="va">bin_target_comp</span>,</span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">2</span>, max_bins <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># DP (general optimization)</span></span></span>
<span class="r-in"><span><span class="va">result_dp_comp</span> <span class="op">&lt;-</span> <span class="fu"><a href="ob_categorical_dp.html">ob_categorical_dp</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">cat_feature_comp</span>, <span class="va">bin_target_comp</span>,</span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">2</span>, max_bins <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMethod comparison:\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Method comparison:</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  IVB total IV:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_ivb_comp</span><span class="op">$</span><span class="va">total_iv</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   IVB total IV: 0.053 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  GMB total IV:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_gmb_comp</span><span class="op">$</span><span class="va">total_iv</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   GMB total IV: 0.053 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  DP total IV:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_dp_comp</span><span class="op">$</span><span class="va">total_iv</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   DP total IV: 0.0531 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nIVB typically achieves highest IV due to explicit optimization\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IVB typically achieves highest IV due to explicit optimization</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by José Evandeilton Lopes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

