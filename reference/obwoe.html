<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Optimal Binning and Weight of Evidence Calculation — obwoe • OptimalBinningWoE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimal Binning and Weight of Evidence Calculation — obwoe"><meta name="description" content="This function implements a comprehensive suite of state-of-the-art algorithms
for optimal binning and Weight of Evidence (WoE) calculation for both numerical
and categorical variables. It maximizes predictive power while preserving
interpretability through monotonic constraints, information-theoretic optimization,
and statistical validation. Primarily designed for credit risk modeling,
classification problems, and predictive analytics applications."><meta property="og:description" content="This function implements a comprehensive suite of state-of-the-art algorithms
for optimal binning and Weight of Evidence (WoE) calculation for both numerical
and categorical variables. It maximizes predictive power while preserving
interpretability through monotonic constraints, information-theoretic optimization,
and statistical validation. Primarily designed for credit risk modeling,
classification problems, and predictive analytics applications."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OptimalBinningWoE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Optimal Binning and Weight of Evidence Calculation</h1>

      <div class="d-none name"><code>obwoe.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function implements a comprehensive suite of state-of-the-art algorithms
for optimal binning and Weight of Evidence (WoE) calculation for both numerical
and categorical variables. It maximizes predictive power while preserving
interpretability through monotonic constraints, information-theoretic optimization,
and statistical validation. Primarily designed for credit risk modeling,
classification problems, and predictive analytics applications.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">obwoe</span><span class="op">(</span></span>
<span>  <span class="va">dt</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  features <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_bins <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  max_bins <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"jedi"</span>,</span>
<span>  positive <span class="op">=</span> <span class="st">"bad|1"</span>,</span>
<span>  preprocess <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  trace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  outputall <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dt">dt<a class="anchor" aria-label="anchor" href="#arg-dt"></a></dt>
<dd><p>A data.table containing the dataset.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>The name of the target variable column (must be binary: 0/1).</p></dd>


<dt id="arg-features">features<a class="anchor" aria-label="anchor" href="#arg-features"></a></dt>
<dd><p>Vector of feature names to process. If NULL, all features except the target will be processed.</p></dd>


<dt id="arg-min-bins">min_bins<a class="anchor" aria-label="anchor" href="#arg-min-bins"></a></dt>
<dd><p>Minimum number of bins (default: 3).</p></dd>


<dt id="arg-max-bins">max_bins<a class="anchor" aria-label="anchor" href="#arg-max-bins"></a></dt>
<dd><p>Maximum number of bins (default: 4).</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>The binning method to use. Can be "auto" or one of the methods listed in the details section tables. Default is 'jedi'.</p></dd>


<dt id="arg-positive">positive<a class="anchor" aria-label="anchor" href="#arg-positive"></a></dt>
<dd><p>Character string specifying which category should be considered as positive. Must be either "bad|1" or "good|1".</p></dd>


<dt id="arg-preprocess">preprocess<a class="anchor" aria-label="anchor" href="#arg-preprocess"></a></dt>
<dd><p>Logical. Whether to preprocess the data before binning (default: TRUE).</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Logical. Whether to display a progress bar. Default is TRUE.</p></dd>


<dt id="arg-trace">trace<a class="anchor" aria-label="anchor" href="#arg-trace"></a></dt>
<dd><p>Logical. Whether to generate error logs when testing existing methods.</p></dd>


<dt id="arg-outputall">outputall<a class="anchor" aria-label="anchor" href="#arg-outputall"></a></dt>
<dd><p>Logical. If TRUE, returns only the optimal binning gains table. If FALSE, returns a list with data, gains table, and reports (default: TRUE).</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>A list of additional control parameters:</p><ul><li><p>cat_cutoff: Minimum frequency for a category (default: 0.05)</p></li>
<li><p>bin_cutoff: Minimum frequency for a bin (default: 0.05)</p></li>
<li><p>min_bads: Minimum proportion of bad cases in a bin (default: 0.05)</p></li>
<li><p>pvalue_threshold: P-value threshold for statistical tests (default: 0.05)</p></li>
<li><p>max_n_prebins: Maximum number of pre-bins (default: 20)</p></li>
<li><p>monotonicity_direction: Direction of monotonicity for some algorithms ("increase" or "decrease")</p></li>
<li><p>lambda: Regularization parameter for some algorithms (default: 0.1)</p></li>
<li><p>min_bin_size: Minimum bin size as a proportion of total observations (default: 0.05)</p></li>
<li><p>min_iv_gain: Minimum IV gain for bin splitting for some algorithms (default: 0.01)</p></li>
<li><p>max_depth: Maximum depth for tree-based algorithms (default: 10)</p></li>
<li><p>num_miss_value: Value to replace missing numeric values (default: -999.0)</p></li>
<li><p>char_miss_value: Value to replace missing categorical values (default: "N/A")</p></li>
<li><p>outlier_method: Method for outlier detection ("iqr", "zscore", or "grubbs")</p></li>
<li><p>outlier_process: Whether to process outliers (default: FALSE)</p></li>
<li><p>iqr_k: IQR multiplier for outlier detection (default: 1.5)</p></li>
<li><p>zscore_threshold: Z-score threshold for outlier detection (default: 3)</p></li>
<li><p>grubbs_alpha: Significance level for Grubbs' test (default: 0.05)</p></li>
<li><p>n_threads: Number of threads for parallel processing (default: 1)</p></li>
<li><p>is_monotonic: Whether to enforce monotonicity in binning (default: TRUE)</p></li>
<li><p>population_size: Population size for genetic algorithm (default: 50)</p></li>
<li><p>max_generations: Maximum number of generations for genetic algorithm (default: 100)</p></li>
<li><p>mutation_rate: Mutation rate for genetic algorithm (default: 0.1)</p></li>
<li><p>initial_temperature: Initial temperature for simulated annealing (default: 1)</p></li>
<li><p>cooling_rate: Cooling rate for simulated annealing (default: 0.995)</p></li>
<li><p>max_iterations: Maximum number of iterations for iterative algorithms (default: 1000)</p></li>
<li><p>include_upper_bound: Include upper bound for numeric bins (default is TRUE)</p></li>
<li><p>bin_separator: Bin separator for optimal bins categorical variables (default = "%;%")</p></li>
<li><p>laplace_smoothing: Smoothing parameter for WoE calculation (default: 0.5)</p></li>
<li><p>sketch_k: Parameter controlling the accuracy of sketch-based algorithms (default: 200)</p></li>
<li><p>sketch_width: Width parameter for sketch-based algorithms (default: 2000)</p></li>
<li><p>sketch_depth: Depth parameter for sketch-based algorithms (default: 5)</p></li>
<li><p>polynomial_degree: Degree of polynomial for LPDB algorithm (default: 3)</p></li>
<li><p>auto_monotonicity: Auto-detect monotonicity direction (default: TRUE)</p></li>
<li><p>monotonic_trend: Monotonicity direction for DP algorithm (default: "auto")</p></li>
<li><p>use_chi2_algorithm: Whether to use enhanced Chi2 algorithm (default: FALSE)</p></li>
<li><p>chi_merge_threshold: Threshold for chi-merge algorithm (default: 0.05)</p></li>
<li><p>force_monotonic_direction: Force direction in MBLP (0=auto, 1=increasing, -1=decreasing)</p></li>
<li><p>monotonicity_direction: Monotonicity for UDT ("none", "increasing", "decreasing", "auto")</p></li>
<li><p>divergence_method: Divergence measure for DMIV ("he", "kl", "tr", "klj", "sc", "js", "l1", "l2", "ln")</p></li>
<li><p>bin_method: Method for WoE calculation in DMIV ("woe", "woe1")</p></li>
<li><p>adaptive_cooling: Whether to use adaptive cooling in SAB (default: TRUE)</p></li>
<li><p>enforce_monotonic: Whether to enforce monotonicity in various algorithms (default: TRUE)</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Depending on the value of outputall:
If outputall = FALSE:
A data.table containing the optimal binning gains table (woebin).
If outputall = TRUE:
A list containing:</p>
<dl><dt>data</dt>
<dd><p>The original dataset with added WoE columns</p></dd>

<dt>woebin</dt>
<dd><p>Information about the bins created, including:</p><ul><li><p>feature: Name of the feature</p></li>
<li><p>bin: Bin label or range</p></li>
<li><p>count: Number of observations in the bin</p></li>
<li><p>count_distr: Proportion of observations in the bin</p></li>
<li><p>good: Number of good cases (target = 0) in the bin</p></li>
<li><p>bad: Number of bad cases (target = 1) in the bin</p></li>
<li><p>good_rate: Proportion of good cases in the bin</p></li>
<li><p>bad_rate: Proportion of bad cases in the bin</p></li>
<li><p>woe: Weight of Evidence for the bin</p></li>
<li><p>iv: Information Value contribution of the bin</p></li>
</ul></dd>

<dt>report_best_model</dt>
<dd><p>Report on the best tested models, including:</p><ul><li><p>feature: Name of the feature</p></li>
<li><p>method: Best method selected for the feature</p></li>
<li><p>iv_total: Total Information Value achieved</p></li>
<li><p>n_bins: Number of bins created</p></li>
<li><p>runtime: Execution time for binning the feature</p></li>
</ul></dd>

<dt>report_preprocess</dt>
<dd><p>Preprocessing report for each feature, including:</p><ul><li><p>feature: Name of the feature</p></li>
<li><p>type: Data type of the feature</p></li>
<li><p>missing_count: Number of missing values</p></li>
<li><p>outlier_count: Number of outliers detected</p></li>
<li><p>unique_count: Number of unique values</p></li>
<li><p>mean_before: Mean value before preprocessing</p></li>
<li><p>mean_after: Mean value after preprocessing</p></li>
<li><p>sd_before: Standard deviation before preprocessing</p></li>
<li><p>sd_after: Standard deviation after preprocessing</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="algorithm-classification">Algorithm Classification<a class="anchor" aria-label="anchor" href="#algorithm-classification"></a></h3>

<div class="section">
<h4 id="categorical-variables">Categorical Variables<a class="anchor" aria-label="anchor" href="#categorical-variables"></a></h4>
<table class="table table"><tr><td>Algorithm</td><td>Abbreviation</td><td>Theoretical Foundation</td><td>Key Features</td></tr><tr><td>ChiMerge</td><td>CM</td><td>Statistical Tests</td><td>Uses chi-square tests to merge adjacent bins</td></tr><tr><td>Dynamic Programming with Local Constraints</td><td>DPLC</td><td>Mathematical Programming</td><td>Maximizes IV with global optimization</td></tr><tr><td>Fisher's Exact Test Binning</td><td>FETB</td><td>Statistical Tests</td><td>Uses Fisher's exact test for optimal merging</td></tr><tr><td>Greedy Merge Binning</td><td>GMB</td><td>Iterative Optimization</td><td>Iteratively merges bins to maximize IV</td></tr><tr><td>Information Value Binning</td><td>IVB</td><td>Information Theory</td><td>Dynamic programming for IV maximization</td></tr><tr><td>Joint Entropy-Driven Information</td><td>JEDI</td><td>Information Theory</td><td>Adaptive merging with entropy optimization</td></tr><tr><td>Monotonic Binning Algorithm</td><td>MBA</td><td>Information Theory</td><td>Combines WoE/IV with monotonicity constraints</td></tr><tr><td>Mixed Integer Linear Programming</td><td>MILP</td><td>Mathematical Programming</td><td>Mathematical optimization with constraints</td></tr><tr><td>Monotonic Optimal Binning</td><td>MOB</td><td>Iterative Optimization</td><td>Specialized for monotonicity preservation</td></tr><tr><td>Simulated Annealing Binning</td><td>SAB</td><td>Metaheuristic Optimization</td><td>Simulated annealing for global optimization</td></tr><tr><td>Similarity-Based Logistic Partitioning</td><td>SBLP</td><td>Distance-Based Methods</td><td>Similarity measures for optimal partitioning</td></tr><tr><td>Sliding Window Binning</td><td>SWB</td><td>Iterative Optimization</td><td>Sliding window approach with adaptive merging</td></tr><tr><td>User-Defined Technique</td><td>UDT</td><td>Hybrid Methods</td><td>Flexible hybrid approach for binning</td></tr><tr><td>JEDI Multinomial WoE</td><td>JEDI_MWOE</td><td>Information Theory</td><td>Extension of JEDI for multinomial response</td></tr></table></div>

<div class="section">
<h4 id="numerical-variables">Numerical Variables<a class="anchor" aria-label="anchor" href="#numerical-variables"></a></h4>
<table class="table table"><tr><td>Algorithm</td><td>Abbreviation</td><td>Theoretical Foundation</td><td>Key Features</td></tr><tr><td>Branch and Bound</td><td>BB</td><td>Mathematical Programming</td><td>Efficient search in solution space</td></tr><tr><td>ChiMerge</td><td>CM</td><td>Statistical Tests</td><td>Chi-square-based merging strategy</td></tr><tr><td>Dynamic Programming with Local Constraints</td><td>DPLC</td><td>Mathematical Programming</td><td>Constrained optimization with DP</td></tr><tr><td>Equal-Width Binning</td><td>EWB</td><td>Simple Discretization</td><td>Equal-width intervals with adaptive refinement</td></tr><tr><td>Fisher's Exact Test Binning</td><td>FETB</td><td>Statistical Tests</td><td>Fisher's test for statistical significance</td></tr><tr><td>Joint Entropy-Driven Interval</td><td>JEDI</td><td>Information Theory</td><td>Entropy optimization with adaptive merging</td></tr><tr><td>K-means Binning</td><td>KMB</td><td>Clustering</td><td>K-means inspired clustering approach</td></tr><tr><td>Local Density Binning</td><td>LDB</td><td>Density Estimation</td><td>Adapts to local density structure</td></tr><tr><td>Local Polynomial Density Binning</td><td>LPDB</td><td>Density Estimation</td><td>Polynomial density estimation approach</td></tr><tr><td>Monotonic Binning with Linear Programming</td><td>MBLP</td><td>Mathematical Programming</td><td>Linear programming with monotonicity</td></tr><tr><td>Minimum Description Length Principle</td><td>MDLP</td><td>Information Theory</td><td>MDL criterion with monotonicity</td></tr><tr><td>Monotonic Optimal Binning</td><td>MOB</td><td>Iterative Optimization</td><td>Specialized monotonicity preservation</td></tr><tr><td>Monotonic Risk Binning with LR Pre-binning</td><td>MRBLP</td><td>Hybrid Methods</td><td>Likelihood ratio pre-binning approach</td></tr><tr><td>Optimal Supervised Learning Partitioning</td><td>OSLP</td><td>Supervised Learning</td><td>Specialized supervised approach</td></tr><tr><td>Unsupervised Binning with Standard Deviation</td><td>UBSD</td><td>Statistical Methods</td><td>Standard deviation-based approach</td></tr><tr><td>Unsupervised Decision Tree</td><td>UDT</td><td>Decision Trees</td><td>Decision tree inspired binning</td></tr><tr><td>Isotonic Regression</td><td>IR</td><td>Statistical Methods</td><td>Pool Adjacent Violators algorithm</td></tr><tr><td>Fast MDLP with Monotonicity</td><td>FAST_MDLPM</td><td>Information Theory</td><td>Optimized MDL implementation</td></tr><tr><td>JEDI Multinomial WoE</td><td>JEDI_MWOE</td><td>Information Theory</td><td>Multinomial extension of JEDI</td></tr><tr><td>Sketch-based Binning</td><td>SKETCH</td><td>Approximate Computing</td><td>KLL sketch for efficient quantile approximation</td></tr></table></div>


</div>

<div class="section">
<h3 id="mathematical-framework">Mathematical Framework<a class="anchor" aria-label="anchor" href="#mathematical-framework"></a></h3>

<div class="section">
<h4 id="weight-of-evidence-woe-">Weight of Evidence (WoE)<a class="anchor" aria-label="anchor" href="#weight-of-evidence-woe-"></a></h4>


<p>The Weight of Evidence measures the predictive power of a bin and is defined as:</p>
<p>$$WoE_i = \ln\left(\frac{P(X_i|Y=1)}{P(X_i|Y=0)}\right)$$</p>
<p>Where \(P(X_i|Y=1)\) is the proportion of positive events in bin i relative to all positive events,
and \(P(X_i|Y=0)\) is the proportion of negative events in bin i relative to all negative events.</p>
<p>With Bayesian smoothing applied (used in many implementations):</p>
<p>$$WoE_i = \ln\left(\frac{n_{1i} + \alpha\pi}{n_1 + m\alpha} \cdot \frac{n_0 + m\alpha}{n_{0i} + \alpha(1-\pi)}\right)$$</p>
<p>Where:</p><ul><li><p>\(n_{1i}\) is the count of positive cases in bin i</p></li>
<li><p>\(n_{0i}\) is the count of negative cases in bin i</p></li>
<li><p>\(n_1\) is the total count of positive cases</p></li>
<li><p>\(n_0\) is the total count of negative cases</p></li>
<li><p>\(\pi\) is the overall positive rate</p></li>
<li><p>\(\alpha\) is the smoothing parameter (typically 0.5)</p></li>
<li><p>\(m\) is the number of bins</p></li>
</ul></div>

<div class="section">
<h4 id="information-value-iv-">Information Value (IV)<a class="anchor" aria-label="anchor" href="#information-value-iv-"></a></h4>


<p>The Information Value quantifies the predictive power of a variable:</p>
<p>$$IV_i = (P(X_i|Y=1) - P(X_i|Y=0)) \times WoE_i$$</p>
<p>The total Information Value is the sum across all bins:</p>
<p>$$IV_{total} = \sum_{i=1}^{n} IV_i$$</p>
<p>IV can be interpreted as follows:</p><ul><li><p>IV &lt; 0.02: Not predictive</p></li>
<li><p>0.02 &lt;= IV &lt; 0.1: Weak predictive power</p></li>
<li><p>0.1 &lt;= IV &lt; 0.3: Medium predictive power</p></li>
<li><p>0.3 &lt;= IV &lt; 0.5: Strong predictive power</p></li>
<li><p>IV &gt;= 0.5: Suspicious (possible overfitting)</p></li>
</ul></div>

<div class="section">
<h4 id="monotonicity-constraint">Monotonicity Constraint<a class="anchor" aria-label="anchor" href="#monotonicity-constraint"></a></h4>


<p>Many algorithms enforce monotonicity of WoE values across bins, which means:</p>
<p>$$WoE_1 \leq WoE_2 \leq \ldots \leq WoE_n$$ (increasing)</p>
<p>or</p>
<p>$$WoE_1 \geq WoE_2 \geq \ldots \geq WoE_n$$ (decreasing)</p>
</div>


</div>

<div class="section">
<h3 id="method-selection">Method Selection<a class="anchor" aria-label="anchor" href="#method-selection"></a></h3>


<p>When method = "auto", the function tests multiple algorithms and selects the one
that produces the highest total Information Value while respecting the specified constraints.
The selection process considers:</p><ul><li><p>Total Information Value (IV)</p></li>
<li><p>Monotonicity of WoE values</p></li>
<li><p>Number of bins created</p></li>
<li><p>Bin frequency distribution</p></li>
<li><p>Statistical stability</p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Beltrami, M., Mach, M., &amp; Dall'Aglio, M. (2021). Monotonic Optimal Binning Algorithm for Credit Risk Modeling. Risks, 9(3), 58.</p></li>
<li><p>Siddiqi, N. (2006). Credit Risk Scorecards: Developing and Implementing Intelligent Credit Scoring. John Wiley &amp; Sons.</p></li>
<li><p>Thomas, L.C., Edelman, D.B., &amp; Crook, J.N. (2002). Credit Scoring and Its Applications. SIAM.</p></li>
<li><p>Zeng, G. (2013). Metric Divergence Measures and Information Value in Credit Scoring. Journal of Mathematics, 2013, Article ID 848271, 10 pages.</p></li>
<li><p>Zeng, Y. (2014). Univariate feature selection and binner. arXiv preprint arXiv:1410.5420.</p></li>
<li><p>Mironchyk, P., &amp; Tchistiakov, V. (2017). Monotone Optimal Binning Algorithm for Credit Risk Modeling. Working Paper.</p></li>
<li><p>Kerber, R. (1992). ChiMerge: Discretization of Numeric Attributes. In AAAI'92.</p></li>
<li><p>Liu, H. &amp; Setiono, R. (1995). Chi2: Feature Selection and Discretization of Numeric Attributes. In TAI'95.</p></li>
<li><p>Fayyad, U., &amp; Irani, K. (1993). Multi-interval discretization of continuous-valued attributes for classification learning. Proceedings of the 13th International Joint Conference on Artificial Intelligence, 1022-1027.</p></li>
<li><p>Barlow, R. E., &amp; Brunk, H. D. (1972). The isotonic regression problem and its dual. Journal of the American Statistical Association, 67(337), 140-147.</p></li>
<li><p>Fisher, R. A. (1922). On the interpretation of X^2 from contingency tables, and the calculation of P. Journal of the Royal Statistical Society, 85, 87-94.</p></li>
<li><p>Lin, J. (1991). Divergence measures based on the Shannon entropy. IEEE Transactions on Information Theory, 37(1), 145-151.</p></li>
<li><p>Bertsimas, D., &amp; Tsitsiklis, J. N. (1997). Introduction to Linear Optimization. Athena Scientific.</p></li>
<li><p>Gelman, A., Jakulin, A., Pittau, M. G., &amp; Su, Y. S. (2008). A weakly informative default prior distribution for logistic and other regression models. The annals of applied statistics, 2(4), 1360-1383.</p></li>
<li><p>Kirkpatrick, S., Gelatt, C. D., &amp; Vecchi, M. P. (1983). Optimization by simulated annealing. Science, 220(4598), 671-680.</p></li>
<li><p>Navas-Palencia, G. (2020). Optimal binning: mathematical programming formulations for binary classification. arXiv preprint arXiv:2001.08025.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Using the German Credit Data</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://evandeilton.github.io/OptimalBinningWoE/">OptimalBinningWoE</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ShichenXie/scorecard" class="external-link">scorecard</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">germancredit</span>, package <span class="op">=</span> <span class="st">"scorecard"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="va">germancredit</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Process all features with MBLP method</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">dt</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"creditability"</span>, method <span class="op">=</span> <span class="st">"mblp"</span>,</span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">3</span>, max_bins <span class="op">=</span> <span class="fl">5</span>, positive <span class="op">=</span> <span class="st">"bad|1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View WoE binning information</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Process only numeric features with MBLP method and get detailed output</span></span></span>
<span class="r-in"><span><span class="va">numeric_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dt</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">dt</span>, <span class="va">is.numeric</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">numeric_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="va">numeric_features</span>, <span class="st">"creditability"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result_detailed</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">dt</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"creditability"</span>, features <span class="op">=</span> <span class="va">numeric_features</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"mblp"</span>, preprocess <span class="op">=</span> <span class="cn">TRUE</span>, outputall <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">3</span>, max_bins <span class="op">=</span> <span class="fl">5</span>, positive <span class="op">=</span> <span class="st">"bad|1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View WoE-transformed data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result_detailed</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View preprocessing report</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_detailed</span><span class="op">$</span><span class="va">report_preprocess</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View best model report</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_detailed</span><span class="op">$</span><span class="va">report_best_model</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Process only categoric features with UDT method</span></span></span>
<span class="r-in"><span><span class="va">categoric_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dt</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">dt</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">categoric_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="va">categoric_features</span>, <span class="st">"creditability"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result_cat</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">dt</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"creditability"</span>, features <span class="op">=</span> <span class="va">categoric_features</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"udt"</span>, preprocess <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">3</span>, max_bins <span class="op">=</span> <span class="fl">4</span>, positive <span class="op">=</span> <span class="st">"bad|1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View binning information for categorical features</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_cat</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Automatic method selection</span></span></span>
<span class="r-in"><span><span class="va">result_auto</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">dt</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"creditability"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"auto"</span>, <span class="co"># Tries multiple methods and selects the best</span></span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">3</span>, max_bins <span class="op">=</span> <span class="fl">5</span>, positive <span class="op">=</span> <span class="st">"bad|1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View which methods were selected for each feature</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_auto</span><span class="op">$</span><span class="va">report_best_model</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Using specialized algorithms</span></span></span>
<span class="r-in"><span><span class="co"># For numerical features with complex distributions</span></span></span>
<span class="r-in"><span><span class="va">result_lpdb</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">dt</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"creditability"</span>,</span></span>
<span class="r-in"><span>  features <span class="op">=</span> <span class="va">numeric_features</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"lpdb"</span>, <span class="co"># Local Polynomial Density Binning</span></span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">3</span>, max_bins <span class="op">=</span> <span class="fl">5</span>, positive <span class="op">=</span> <span class="st">"bad|1"</span>,</span></span>
<span class="r-in"><span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>polynomial_degree <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For categorical features with many levels</span></span></span>
<span class="r-in"><span><span class="va">result_jedi</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">dt</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"creditability"</span>,</span></span>
<span class="r-in"><span>  features <span class="op">=</span> <span class="va">categoric_features</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"jedi"</span>, <span class="co"># Joint Entropy-Driven Information</span></span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">3</span>, max_bins <span class="op">=</span> <span class="fl">5</span>, positive <span class="op">=</span> <span class="st">"bad|1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lopes J. E.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

