<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Unified Optimal Binning and Weight of Evidence Transformation — obwoe • OptimalBinningWoE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Unified Optimal Binning and Weight of Evidence Transformation — obwoe"><meta name="description" content="Master interface for optimal discretization and Weight of Evidence (WoE)
computation across numerical and categorical predictors. This function serves
as the primary entry point for the OptimalBinningWoE package, providing
automatic feature type detection, intelligent algorithm selection, and unified
output structures for seamless integration into credit scoring and predictive
modeling workflows."><meta property="og:description" content="Master interface for optimal discretization and Weight of Evidence (WoE)
computation across numerical and categorical predictors. This function serves
as the primary entry point for the OptimalBinningWoE package, providing
automatic feature type detection, intelligent algorithm selection, and unified
output structures for seamless integration into credit scoring and predictive
modeling workflows."><meta property="og:image" content="https://evandeilton.github.io/OptimalBinningWoE/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OptimalBinningWoE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">OptimalBinningWoE: Practical Guide for Credit Risk Modeling</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/evandeilton/OptimalBinningWoE/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Unified Optimal Binning and Weight of Evidence Transformation</h1>
      <small class="dont-index">Source: <a href="https://github.com/evandeilton/OptimalBinningWoE/blob/v1.0.7/R/obwoe.R" class="external-link"><code>R/obwoe.R</code></a></small>
      <div class="d-none name"><code>obwoe.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Master interface for optimal discretization and Weight of Evidence (WoE)
computation across numerical and categorical predictors. This function serves
as the primary entry point for the <strong>OptimalBinningWoE</strong> package, providing
automatic feature type detection, intelligent algorithm selection, and unified
output structures for seamless integration into credit scoring and predictive
modeling workflows.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">obwoe</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">target</span>,</span>
<span>  feature <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_bins <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  max_bins <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  algorithm <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="control.obwoe.html">control.obwoe</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A <code>data.frame</code> containing the predictor variables (features)
and the response variable (target). All features to be binned must be present
in this data frame. The data frame should not contain list-columns.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>Character string specifying the column name of the response
variable. Must be a binary outcome encoded as integers <code>0</code> (non-event)
and <code>1</code> (event), or a multinomial outcome encoded as integers
<code>0, 1, 2, ..., K</code>. Missing values in the target are not permitted.</p></dd>


<dt id="arg-feature">feature<a class="anchor" aria-label="anchor" href="#arg-feature"></a></dt>
<dd><p>Optional character vector specifying which columns to process.
If <code>NULL</code> (default), all columns except <code>target</code> are processed.
Features containing only missing values are automatically skipped with a warning.</p></dd>


<dt id="arg-min-bins">min_bins<a class="anchor" aria-label="anchor" href="#arg-min-bins"></a></dt>
<dd><p>Integer specifying the minimum number of bins. Must satisfy
\(2 \le\) <code>min_bins</code> \(\le\) <code>max_bins</code>. Algorithms may
produce fewer bins if the data has insufficient unique values. Default is 2.</p></dd>


<dt id="arg-max-bins">max_bins<a class="anchor" aria-label="anchor" href="#arg-max-bins"></a></dt>
<dd><p>Integer specifying the maximum number of bins. Controls the
granularity of discretization. Higher values capture more detail but risk
overfitting. Typical values range from 5 to 10 for credit scoring applications.
Default is 7.</p></dd>


<dt id="arg-algorithm">algorithm<a class="anchor" aria-label="anchor" href="#arg-algorithm"></a></dt>
<dd><p>Character string specifying the binning algorithm.
Use <code>"auto"</code> (default) for automatic selection based on target type:
<code>"jedi"</code> for binary targets, <code>"jedi_mwoe"</code> for multinomial.
See Details for the complete algorithm taxonomy.</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>A list of algorithm-specific control parameters created by
<code><a href="control.obwoe.html">control.obwoe</a></code>. Provides fine-grained control over convergence
thresholds, bin cutoffs, and other optimization parameters.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An S3 object of class <code>"obwoe"</code> containing:</p><dl><dt><code>results</code></dt>
<dd><p>Named list where each element contains the binning
    result for a single feature, including:</p><dl><dt><code>bin</code></dt>
<dd><p>Character vector of bin labels/intervals</p></dd>

      <dt><code>woe</code></dt>
<dd><p>Numeric vector of Weight of Evidence per bin</p></dd>

      <dt><code>iv</code></dt>
<dd><p>Numeric vector of Information Value contribution per bin</p></dd>

      <dt><code>count</code></dt>
<dd><p>Integer vector of observation counts per bin</p></dd>

      <dt><code>count_pos</code></dt>
<dd><p>Integer vector of positive (event) counts per bin</p></dd>

      <dt><code>count_neg</code></dt>
<dd><p>Integer vector of negative (non-event) counts per bin</p></dd>

      <dt><code>cutpoints</code></dt>
<dd><p>Numeric vector of bin boundaries (numerical only)</p></dd>

      <dt><code>converged</code></dt>
<dd><p>Logical indicating algorithm convergence</p></dd>

      <dt><code>iterations</code></dt>
<dd><p>Integer count of optimization iterations</p></dd>


</dl><p></p></dd>

  <dt><code>summary</code></dt>
<dd><p>Data frame with one row per feature containing:
    <code>feature</code> (name), <code>type</code> (numerical/categorical),
    <code>algorithm</code> (used), <code>n_bins</code> (count), <code>total_iv</code> (sum),
    <code>error</code> (logical flag)</p></dd>

  <dt><code>target</code></dt>
<dd><p>Name of the target column</p></dd>

  <dt><code>target_type</code></dt>
<dd><p>Detected type: <code>"binary"</code> or <code>"multinomial"</code></p></dd>

  <dt><code>n_features</code></dt>
<dd><p>Number of features processed</p></dd>

  <dt><code>call</code></dt>
<dd><p>The matched function call for reproducibility</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="theoretical-foundation">Theoretical Foundation<a class="anchor" aria-label="anchor" href="#theoretical-foundation"></a></h3>


<p>Weight of Evidence (WoE) transformation is a staple of credit scoring methodology,
originating from information theory and the concept of evidential support
(Good, 1950; Kullback, 1959). For a bin \(i\), the WoE is defined as:</p>
<p>$$WoE_i = \ln\left(\frac{p_i}{n_i}\right) = \ln\left(\frac{N_{i,1}/N_1}{N_{i,0}/N_0}\right)$$</p>
<p>where:</p><ul><li><p>\(N_{i,1}\) = number of events (target=1) in bin \(i\)</p></li>
<li><p>\(N_{i,0}\) = number of non-events (target=0) in bin \(i\)</p></li>
<li><p>\(N_1\), \(N_0\) = total events and non-events, respectively</p></li>
<li><p>\(p_i = N_{i,1}/N_1\) = proportion of events in bin \(i\)</p></li>
<li><p>\(n_i = N_{i,0}/N_0\) = proportion of non-events in bin \(i\)</p></li>
</ul><p>The Information Value (IV) quantifies the total predictive power of a binning:</p>
<p>$$IV = \sum_{i=1}^{k} (p_i - n_i) \times WoE_i = \sum_{i=1}^{k} (p_i - n_i) \times \ln\left(\frac{p_i}{n_i}\right)$$</p>
<p>where \(k\) is the number of bins. IV is equivalent to the Kullback-Leibler
divergence between the event and non-event distributions.</p>
</div>

<div class="section">
<h3 id="algorithm-taxonomy">Algorithm Taxonomy<a class="anchor" aria-label="anchor" href="#algorithm-taxonomy"></a></h3>


<p>The package provides 28 algorithms organized by supported feature types:</p>
<p><strong>Universal Algorithms</strong> (both numerical and categorical):</p><table class="table table"><tr><td><strong>ID</strong></td><td><strong>Full Name</strong></td><td><strong>Method</strong></td></tr><tr><td><code>jedi</code></td><td>Joint Entropy-Driven Information</td><td>Heuristic + IV optimization</td></tr><tr><td><code>jedi_mwoe</code></td><td>JEDI Multinomial WoE</td><td>Extension for K&gt;2 classes</td></tr><tr><td><code>cm</code></td><td>ChiMerge</td><td>Bottom-up chi-squared merging</td></tr><tr><td><code>dp</code></td><td>Dynamic Programming</td><td>Exact optimal IV partitioning</td></tr><tr><td><code>dmiv</code></td><td>Decision Tree MIV</td><td>Recursive partitioning</td></tr><tr><td><code>fetb</code></td><td>Fisher's Exact Test</td><td>Statistical significance-based</td></tr><tr><td><code>mob</code></td><td>Monotonic Optimal Binning</td><td>IV-optimal with monotonicity</td></tr><tr><td><code>sketch</code></td><td>Sketching</td><td>Probabilistic data structures</td></tr><tr><td><code>udt</code></td><td>Unsupervised Decision Tree</td><td>Entropy-based without target</td></tr></table><p><strong>Numerical-Only Algorithms</strong>:</p><table class="table table"><tr><td><strong>ID</strong></td><td><strong>Description</strong></td></tr><tr><td><code>bb</code></td><td>Branch and Bound (exact search)</td></tr><tr><td><code>ewb</code></td><td>Equal Width Binning (unsupervised)</td></tr><tr><td><code>fast_mdlp</code></td><td>Fast MDLP with pruning</td></tr><tr><td><code>ir</code></td><td>Isotonic Regression</td></tr><tr><td><code>kmb</code></td><td>K-Means Binning</td></tr><tr><td><code>ldb</code></td><td>Local Density Binning</td></tr><tr><td><code>lpdb</code></td><td>Local Polynomial Density</td></tr><tr><td><code>mblp</code></td><td>Monotonic Binning LP</td></tr><tr><td><code>mdlp</code></td><td>Minimum Description Length</td></tr><tr><td><code>mrblp</code></td><td>Monotonic Regression LP</td></tr><tr><td><code>oslp</code></td><td>Optimal Supervised LP</td></tr><tr><td><code>ubsd</code></td><td>Unsupervised Std-Dev Based</td></tr></table><p><strong>Categorical-Only Algorithms</strong>:</p><table class="table table"><tr><td><strong>ID</strong></td><td><strong>Description</strong></td></tr><tr><td><code>gmb</code></td><td>Greedy Monotonic Binning</td></tr><tr><td><code>ivb</code></td><td>Information Value DP (exact)</td></tr><tr><td><code>mba</code></td><td>Modified Binning Algorithm</td></tr><tr><td><code>milp</code></td><td>Mixed Integer LP</td></tr><tr><td><code>sab</code></td><td>Simulated Annealing</td></tr><tr><td><code>sblp</code></td><td>Similarity-Based LP</td></tr><tr><td><code>swb</code></td><td>Sliding Window Binning</td></tr></table></div>

<div class="section">
<h3 id="automatic-type-detection">Automatic Type Detection<a class="anchor" aria-label="anchor" href="#automatic-type-detection"></a></h3>


<p>Feature types are detected as follows:</p><ul><li><p><strong>Numerical</strong>: <code>numeric</code> or <code>integer</code> vectors not of class <code>factor</code></p></li>
<li><p><strong>Categorical</strong>: <code>character</code>, <code>factor</code>, or <code>logical</code> vectors</p></li>
</ul><p>When <code>algorithm = "auto"</code>, the function selects:</p><ul><li><p><code>"jedi"</code> for binary targets (recommended for most use cases)</p></li>
<li><p><code>"jedi_mwoe"</code> for multinomial targets (K &gt; 2 classes)</p></li>
</ul></div>

<div class="section">
<h3 id="iv-interpretation-guidelines">IV Interpretation Guidelines<a class="anchor" aria-label="anchor" href="#iv-interpretation-guidelines"></a></h3>


<p>Siddiqi (2006) provides the following IV thresholds for variable selection:</p><table class="table table"><tr><td><strong>IV Range</strong></td><td><strong>Predictive Power</strong></td></tr><tr><td>&lt; 0.02</td><td>Unpredictive</td></tr><tr><td>0.02 - 0.10</td><td>Weak</td></tr><tr><td>0.10 - 0.30</td><td>Medium</td></tr><tr><td>0.30 - 0.50</td><td>Strong</td></tr><tr><td>&gt; 0.50</td><td>Suspicious (likely overfitting)</td></tr></table></div>

<div class="section">
<h3 id="computational-considerations">Computational Considerations<a class="anchor" aria-label="anchor" href="#computational-considerations"></a></h3>


<p>Time complexity varies by algorithm:</p><ul><li><p><strong>JEDI, ChiMerge, MOB</strong>: \(O(n \log n + k^2 m)\) where \(n\) = observations, \(k\) = bins, \(m\) = iterations</p></li>
<li><p><strong>Dynamic Programming</strong>: \(O(n \cdot k^2)\) for exact solution</p></li>
<li><p><strong>Equal Width</strong>: \(O(n)\) (fastest, but unsupervised)</p></li>
<li><p><strong>MILP, SBLP</strong>: Potentially exponential (NP-hard problems)</p></li>
</ul><p>For large datasets (\(n &gt; 10^6\)), consider:</p><ol><li><p>Using <code>algorithm = "sketch"</code> for approximate streaming</p></li>
<li><p>Reducing <code>max_n_prebins</code> via <code><a href="control.obwoe.html">control.obwoe()</a></code></p></li>
<li><p>Sampling the data before binning</p></li>
</ol></div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Good, I. J. (1950). Probability and the Weighing of Evidence.
<em>Griffin, London</em>.</p>
<p>Kullback, S. (1959). Information Theory and Statistics.
<em>Wiley, New York</em>.</p>
<p>Siddiqi, N. (2006). Credit Risk Scorecards: Developing and Implementing
Intelligent Credit Scoring. <em>John Wiley &amp; Sons</em>.
<a href="https://doi.org/10.1002/9781119201731" class="external-link">doi:10.1002/9781119201731</a></p>
<p>Thomas, L. C., Edelman, D. B., &amp; Crook, J. N. (2002). Credit Scoring
and Its Applications. <em>SIAM Monographs on Mathematical Modeling
and Computation</em>. <a href="https://doi.org/10.1137/1.9780898718317" class="external-link">doi:10.1137/1.9780898718317</a></p>
<p>Navas-Palencia, G. (2020). Optimal Binning: Mathematical Programming
Formulation and Solution Approach. <em>Expert Systems with Applications</em>,
158, 113508. <a href="https://doi.org/10.1016/j.eswa.2020.113508" class="external-link">doi:10.1016/j.eswa.2020.113508</a></p>
<p>Zeng, G. (2014). A Necessary Condition for a Good Binning Algorithm
in Credit Scoring. <em>Applied Mathematical Sciences</em>, 8(65), 3229-3242.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="control.obwoe.html">control.obwoe</a></code> for algorithm-specific parameters,
<code><a href="obwoe_algorithms.html">obwoe_algorithms</a></code> to list all available algorithms with capabilities,
<code><a href="print.obwoe.html">print.obwoe</a></code> for display methods,
<code><a href="ob_apply_woe_num.html">ob_apply_woe_num</a></code> and <code><a href="ob_apply_woe_cat.html">ob_apply_woe_cat</a></code> to apply
WoE transformations to new data.</p>
<p>For individual algorithms with full parameter control:
<code><a href="ob_numerical_jedi.html">ob_numerical_jedi</a></code>, <code><a href="ob_categorical_jedi.html">ob_categorical_jedi</a></code>,
<code><a href="ob_numerical_mdlp.html">ob_numerical_mdlp</a></code>, <code><a href="ob_categorical_ivb.html">ob_categorical_ivb</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Basic Usage with Mixed Feature Types</span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">2000</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulate credit scoring data</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="co"># Numerical features</span></span></span>
<span class="r-in"><span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">45</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">10</span>, <span class="fl">0.8</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  debt_ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  credit_history_months <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">60</span><span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Categorical features</span></span></span>
<span class="r-in"><span>  education <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High School"</span>, <span class="st">"Bachelor"</span>, <span class="st">"Master"</span>, <span class="st">"PhD"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="va">n</span>,</span></span>
<span class="r-in"><span>    replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.35</span>, <span class="fl">0.40</span>, <span class="fl">0.20</span>, <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  employment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Employed"</span>, <span class="st">"Self-Employed"</span>, <span class="st">"Unemployed"</span>, <span class="st">"Retired"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="va">n</span>,</span></span>
<span class="r-in"><span>    replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.60</span>, <span class="fl">0.20</span>, <span class="fl">0.10</span>, <span class="fl">0.10</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Binary target (default probability varies by features)</span></span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">1</span>, <span class="fl">0.15</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Process all features with automatic algorithm selection</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">df</span>, target <span class="op">=</span> <span class="st">"target"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Optimal Binning Weight of Evidence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ===================================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Target: target ( binary )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Features processed: 6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results:  6  successful</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Top features by IV:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   employment: IV = 0.0269 (4 bins, jedi)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   credit_history_months: IV = 0.0193 (4 bins, jedi)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   income: IV = 0.0092 (4 bins, jedi)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   debt_ratio: IV = 0.0091 (4 bins, jedi)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   education: IV = 0.0048 (4 bins, jedi)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ... and 1 more</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View detailed summary</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 feature        type algorithm n_bins    total_iv converged</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                   age   numerical      jedi      3 0.002240807      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                income   numerical      jedi      4 0.009202297      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            debt_ratio   numerical      jedi      4 0.009121470      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 credit_history_months   numerical      jedi      4 0.019333587      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5             education categorical      jedi      4 0.004793127      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            employment categorical      jedi      4 0.026934398      TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   iterations error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          2 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          2 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          2 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          2 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          0 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          0 FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access results for a specific feature</span></span></span>
<span class="r-in"><span><span class="va">age_bins</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">age</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  bin <span class="op">=</span> <span class="va">age_bins</span><span class="op">$</span><span class="va">bin</span>,</span></span>
<span class="r-in"><span>  woe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">age_bins</span><span class="op">$</span><span class="va">woe</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  iv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">age_bins</span><span class="op">$</span><span class="va">iv</span>, <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  count <span class="op">=</span> <span class="va">age_bins</span><span class="op">$</span><span class="va">count</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     bin    woe     iv count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      (-Inf;40.127923] -0.022 0.0002   741</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 (40.127923;59.856538] -0.020 0.0002   953</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      (59.856538;+Inf]  0.109 0.0019   306</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Using a Specific Algorithm</span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use MDLP for numerical features (entropy-based)</span></span></span>
<span class="r-in"><span><span class="va">result_mdlp</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"target"</span>,</span></span>
<span class="r-in"><span>  feature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"income"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  algorithm <span class="op">=</span> <span class="st">"mdlp"</span>,</span></span>
<span class="r-in"><span>  min_bins <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  max_bins <span class="op">=</span> <span class="fl">6</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMDLP Results:\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MDLP Results:</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_mdlp</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   feature      type algorithm n_bins     total_iv converged iterations error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     age numerical      mdlp      3 0.0003386014      TRUE         16 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  income numerical      mdlp      3 0.0022781944      TRUE         16 FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Custom Control Parameters</span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fine-tune algorithm behavior</span></span></span>
<span class="r-in"><span><span class="va">ctrl</span> <span class="op">&lt;-</span> <span class="fu"><a href="control.obwoe.html">control.obwoe</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  bin_cutoff <span class="op">=</span> <span class="fl">0.02</span>, <span class="co"># Minimum 2% per bin</span></span></span>
<span class="r-in"><span>  max_n_prebins <span class="op">=</span> <span class="fl">30</span>, <span class="co"># Allow more initial bins</span></span></span>
<span class="r-in"><span>  convergence_threshold <span class="op">=</span> <span class="fl">1e-8</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result_custom</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"target"</span>,</span></span>
<span class="r-in"><span>  feature <span class="op">=</span> <span class="st">"debt_ratio"</span>,</span></span>
<span class="r-in"><span>  algorithm <span class="op">=</span> <span class="st">"jedi"</span>,</span></span>
<span class="r-in"><span>  control <span class="op">=</span> <span class="va">ctrl</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCustom JEDI Result:\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Custom JEDI Result:</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_custom</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">debt_ratio</span><span class="op">$</span><span class="va">bin</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "(-Inf;0.085180]"     "(0.085180;0.119174]" "(0.119174;0.345076]"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "(0.345076;+Inf]"    </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Example 4: Comparing Multiple Algorithms</span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">algorithms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jedi"</span>, <span class="st">"mdlp"</span>, <span class="st">"ewb"</span>, <span class="st">"mob"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">iv_comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">algorithms</span>, <span class="kw">function</span><span class="op">(</span><span class="va">algo</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">df</span>, target <span class="op">=</span> <span class="st">"target"</span>, feature <span class="op">=</span> <span class="st">"income"</span>, algorithm <span class="op">=</span> <span class="va">algo</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">res</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">total_iv</span></span></span>
<span class="r-in"><span>    <span class="op">}</span>,</span></span>
<span class="r-in"><span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="cn">NA_real_</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nAlgorithm Comparison (IV for 'income'):\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Algorithm Comparison (IV for 'income'):</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">iv_comparison</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         jedi          ewb         mdlp          mob </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.0092022973 0.0028174937 0.0023796596 0.0003402702 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Example 5: Feature Selection Based on IV</span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Process all features and select those with IV &gt; 0.02</span></span></span>
<span class="r-in"><span><span class="va">result_all</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">df</span>, target <span class="op">=</span> <span class="st">"target"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">strong_features</span> <span class="op">&lt;-</span> <span class="va">result_all</span><span class="op">$</span><span class="va">summary</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="va">result_all</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">total_iv</span> <span class="op">&gt;=</span> <span class="fl">0.02</span> <span class="op">&amp;</span> <span class="op">!</span><span class="va">result_all</span><span class="op">$</span><span class="va">summary</span><span class="op">$</span><span class="va">error</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"feature"</span>, <span class="st">"total_iv"</span>, <span class="st">"n_bins"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">strong_features</span> <span class="op">&lt;-</span> <span class="va">strong_features</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">strong_features</span><span class="op">$</span><span class="va">total_iv</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nFeatures with IV &gt;= 0.02 (predictive):\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Features with IV &gt;= 0.02 (predictive):</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">strong_features</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      feature  total_iv n_bins</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 employment 0.0269344      4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Example 6: Handling Algorithm Compatibility</span></span></span>
<span class="r-in"><span><span class="co"># =============================================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># MDLP only works for numerical - will fail for categorical</span></span></span>
<span class="r-in"><span><span class="va">result_mixed</span> <span class="op">&lt;-</span> <span class="fu">obwoe</span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>  target <span class="op">=</span> <span class="st">"target"</span>,</span></span>
<span class="r-in"><span>  algorithm <span class="op">=</span> <span class="st">"mdlp"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check for errors</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCompatibility check:\n"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Compatibility check:</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result_mixed</span><span class="op">$</span><span class="va">summary</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"feature"</span>, <span class="st">"type"</span>, <span class="st">"error"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 feature        type error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                   age   numerical FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                income   numerical FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            debt_ratio   numerical FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 credit_history_months   numerical FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5             education categorical  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            employment categorical  TRUE</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by José Evandeilton Lopes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

