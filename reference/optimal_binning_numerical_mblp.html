<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Optimal Binning for Numerical Features Using Monotonic Binning via Linear Programming (MBLP) — optimal_binning_numerical_mblp • OptimalBinningWoE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimal Binning for Numerical Features Using Monotonic Binning via Linear Programming (MBLP) — optimal_binning_numerical_mblp"><meta name="description" content="This method performs optimal binning for numerical features, ensuring monotonicity in the Weight of Evidence (WoE) across bins.
It adheres to constraints on the minimum and maximum number of bins, merges rare bins, and handles edge cases like identical values.
The algorithm returns bins, WoE, Information Value (IV), counts, cutpoints, and metadata such as convergence status and iterations run."><meta property="og:description" content="This method performs optimal binning for numerical features, ensuring monotonicity in the Weight of Evidence (WoE) across bins.
It adheres to constraints on the minimum and maximum number of bins, merges rare bins, and handles edge cases like identical values.
The algorithm returns bins, WoE, Information Value (IV), counts, cutpoints, and metadata such as convergence status and iterations run."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OptimalBinningWoE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Optimal Binning for Numerical Features Using Monotonic Binning via Linear Programming (MBLP)</h1>

      <div class="d-none name"><code>optimal_binning_numerical_mblp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This method performs optimal binning for numerical features, ensuring monotonicity in the Weight of Evidence (WoE) across bins.
It adheres to constraints on the minimum and maximum number of bins, merges rare bins, and handles edge cases like identical values.
The algorithm returns bins, WoE, Information Value (IV), counts, cutpoints, and metadata such as convergence status and iterations run.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">optimal_binning_numerical_mblp</span><span class="op">(</span></span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">feature</span>,</span>
<span>  min_bins <span class="op">=</span> <span class="fl">3L</span>,</span>
<span>  max_bins <span class="op">=</span> <span class="fl">5L</span>,</span>
<span>  bin_cutoff <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  max_n_prebins <span class="op">=</span> <span class="fl">20L</span>,</span>
<span>  convergence_threshold <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  max_iterations <span class="op">=</span> <span class="fl">1000L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>An integer binary vector (0 or 1) representing the target variable.</p></dd>


<dt id="arg-feature">feature<a class="anchor" aria-label="anchor" href="#arg-feature"></a></dt>
<dd><p>A numeric vector representing the feature to bin.</p></dd>


<dt id="arg-min-bins">min_bins<a class="anchor" aria-label="anchor" href="#arg-min-bins"></a></dt>
<dd><p>Minimum number of bins (default: 3).</p></dd>


<dt id="arg-max-bins">max_bins<a class="anchor" aria-label="anchor" href="#arg-max-bins"></a></dt>
<dd><p>Maximum number of bins (default: 5).</p></dd>


<dt id="arg-bin-cutoff">bin_cutoff<a class="anchor" aria-label="anchor" href="#arg-bin-cutoff"></a></dt>
<dd><p>Minimum frequency proportion for retaining bins (default: 0.05).</p></dd>


<dt id="arg-max-n-prebins">max_n_prebins<a class="anchor" aria-label="anchor" href="#arg-max-n-prebins"></a></dt>
<dd><p>Maximum number of pre-bins before optimization (default: 20).</p></dd>


<dt id="arg-convergence-threshold">convergence_threshold<a class="anchor" aria-label="anchor" href="#arg-convergence-threshold"></a></dt>
<dd><p>Convergence threshold for IV optimization (default: 1e-6).</p></dd>


<dt id="arg-max-iterations">max_iterations<a class="anchor" aria-label="anchor" href="#arg-max-iterations"></a></dt>
<dd><p>Maximum number of iterations allowed (default: 1000).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following components:</p><ul><li><p><code>bin</code>: A character vector of bin intervals in the format "[lower;upper)".</p></li>
<li><p><code>woe</code>: A numeric vector of WoE values for each bin.</p></li>
<li><p><code>iv</code>: A numeric vector of IV contributions for each bin.</p></li>
<li><p><code>count</code>: An integer vector of total observations per bin.</p></li>
<li><p><code>count_pos</code>: An integer vector of positive cases per bin.</p></li>
<li><p><code>count_neg</code>: An integer vector of negative cases per bin.</p></li>
<li><p><code>cutpoints</code>: A numeric vector of cutpoints defining the bin edges.</p></li>
<li><p><code>converged</code>: A boolean indicating whether the algorithm converged.</p></li>
<li><p><code>iterations</code>: An integer indicating the number of iterations executed.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="key-steps-">Key Steps:<a class="anchor" aria-label="anchor" href="#key-steps-"></a></h3>

<ol><li><p><strong>Input Validation</strong>: Ensures proper formatting and constraints for <code>feature</code>, <code>target</code>, and algorithm parameters.</p></li>
<li><p><strong>Pre-Binning</strong>: Creates preliminary bins based on quantiles or unique values in the feature.</p></li>
<li><p><strong>Rare Bin Merging</strong>: Combines bins with frequencies below <code>bin_cutoff</code> to maintain statistical stability.</p></li>
<li><p><strong>Optimization</strong>: Adjusts bins iteratively to maximize IV, enforce monotonicity, and adhere to bin constraints (<code>min_bins</code> and <code>max_bins</code>).</p></li>
<li><p><strong>Monotonicity Enforcement</strong>: Ensures WoE values are either strictly increasing or decreasing across bins.</p></li>
<li><p><strong>Validation</strong>: Verifies bin structure for consistency, preventing gaps or overlapping intervals.</p></li>
</ol></div>

<div class="section">
<h3 id="mathematical-framework-">Mathematical Framework:<a class="anchor" aria-label="anchor" href="#mathematical-framework-"></a></h3>

<ul><li><p><strong>Weight of Evidence (WoE)</strong>: For a bin \( i \):
$$WoE_i = \ln\left(\frac{\text{Distribution of positives}_i}{\text{Distribution of negatives}_i}\right)$$</p></li>
<li><p><strong>Information Value (IV)</strong>: Aggregates predictive power across all bins:
$$IV = \sum_{i=1}^{N} (\text{Distribution of positives}_i - \text{Distribution of negatives}_i) \times WoE_i$$</p></li>
</ul></div>

<div class="section">
<h3 id="features-">Features:<a class="anchor" aria-label="anchor" href="#features-"></a></h3>

<ul><li><p>Monotonic WoE ensures interpretability in logistic regression and credit scoring models.</p></li>
<li><p>Dynamically adjusts binning to maximize IV and improve model predictive power.</p></li>
<li><p>Handles rare categories and missing values by merging and imputation.</p></li>
<li><p>Supports large datasets with efficient pre-binning and convergence checks.</p></li>
<li><p>Validates results to prevent invalid bin configurations (e.g., gaps, overlaps).</p></li>
</ul></div>

<div class="section">
<h3 id="algorithm-parameters-">Algorithm Parameters:<a class="anchor" aria-label="anchor" href="#algorithm-parameters-"></a></h3>

<ul><li><p><code>min_bins</code>: Minimum number of bins (default: 3).</p></li>
<li><p><code>max_bins</code>: Maximum number of bins (default: 5).</p></li>
<li><p><code>bin_cutoff</code>: Minimum frequency proportion required to retain a bin as standalone (default: 0.05).</p></li>
<li><p><code>max_n_prebins</code>: Maximum number of preliminary bins before optimization (default: 20).</p></li>
<li><p><code>convergence_threshold</code>: Threshold for convergence in IV optimization (default: 1e-6).</p></li>
<li><p><code>max_iterations</code>: Maximum number of iterations allowed for optimization (default: 1000).</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feature</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">1</span>, <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">optimal_binning_numerical_mblp</span><span class="op">(</span><span class="va">target</span>, <span class="va">feature</span>, min_bins <span class="op">=</span> <span class="fl">3</span>, max_bins <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lopes J. E.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

