<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Optimal Binning for Numerical Features using the Minimum Description Length Principle (MDLP) — optimal_binning_numerical_mdlp • OptimalBinningWoE</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimal Binning for Numerical Features using the Minimum Description Length Principle (MDLP) — optimal_binning_numerical_mdlp"><meta name="description" content="This function performs optimal binning for numerical features using the Minimum Description Length Principle (MDLP).
It minimizes information loss by merging adjacent bins that reduce the MDL cost, while ensuring monotonicity in the Weight of Evidence (WoE).
The algorithm adjusts the number of bins between min_bins and max_bins and handles rare bins by merging them iteratively.
Designed for robust and numerically stable calculations, it incorporates protections for extreme cases and convergence controls."><meta property="og:description" content="This function performs optimal binning for numerical features using the Minimum Description Length Principle (MDLP).
It minimizes information loss by merging adjacent bins that reduce the MDL cost, while ensuring monotonicity in the Weight of Evidence (WoE).
The algorithm adjusts the number of bins between min_bins and max_bins and handles rare bins by merging them iteratively.
Designed for robust and numerically stable calculations, it incorporates protections for extreme cases and convergence controls."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OptimalBinningWoE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6.9005</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Optimal Binning for Numerical Features using the Minimum Description Length Principle (MDLP)</h1>

      <div class="d-none name"><code>optimal_binning_numerical_mdlp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function performs optimal binning for numerical features using the Minimum Description Length Principle (MDLP).
It minimizes information loss by merging adjacent bins that reduce the MDL cost, while ensuring monotonicity in the Weight of Evidence (WoE).
The algorithm adjusts the number of bins between <code>min_bins</code> and <code>max_bins</code> and handles rare bins by merging them iteratively.
Designed for robust and numerically stable calculations, it incorporates protections for extreme cases and convergence controls.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">optimal_binning_numerical_mdlp</span><span class="op">(</span></span>
<span>  <span class="va">target</span>,</span>
<span>  <span class="va">feature</span>,</span>
<span>  min_bins <span class="op">=</span> <span class="fl">3L</span>,</span>
<span>  max_bins <span class="op">=</span> <span class="fl">5L</span>,</span>
<span>  bin_cutoff <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  max_n_prebins <span class="op">=</span> <span class="fl">20L</span>,</span>
<span>  convergence_threshold <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  max_iterations <span class="op">=</span> <span class="fl">1000L</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>An integer binary vector (0 or 1) representing the target variable.</p></dd>


<dt id="arg-feature">feature<a class="anchor" aria-label="anchor" href="#arg-feature"></a></dt>
<dd><p>A numeric vector representing the feature to bin.</p></dd>


<dt id="arg-min-bins">min_bins<a class="anchor" aria-label="anchor" href="#arg-min-bins"></a></dt>
<dd><p>Minimum number of bins (default: 3).</p></dd>


<dt id="arg-max-bins">max_bins<a class="anchor" aria-label="anchor" href="#arg-max-bins"></a></dt>
<dd><p>Maximum number of bins (default: 5).</p></dd>


<dt id="arg-bin-cutoff">bin_cutoff<a class="anchor" aria-label="anchor" href="#arg-bin-cutoff"></a></dt>
<dd><p>Minimum proportion of records per bin (default: 0.05).</p></dd>


<dt id="arg-max-n-prebins">max_n_prebins<a class="anchor" aria-label="anchor" href="#arg-max-n-prebins"></a></dt>
<dd><p>Maximum number of pre-bins before merging (default: 20).</p></dd>


<dt id="arg-convergence-threshold">convergence_threshold<a class="anchor" aria-label="anchor" href="#arg-convergence-threshold"></a></dt>
<dd><p>Convergence threshold for IV optimization (default: 1e-6).</p></dd>


<dt id="arg-max-iterations">max_iterations<a class="anchor" aria-label="anchor" href="#arg-max-iterations"></a></dt>
<dd><p>Maximum number of iterations allowed (default: 1000).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following components:</p><ul><li><p><code>bin</code>: A vector of bin names representing the intervals.</p></li>
<li><p><code>woe</code>: A numeric vector with the WoE values for each bin.</p></li>
<li><p><code>iv</code>: A numeric vector with the IV values for each bin.</p></li>
<li><p><code>count</code>: An integer vector with the total number of observations in each bin.</p></li>
<li><p><code>count_pos</code>: An integer vector with the count of positive cases in each bin.</p></li>
<li><p><code>count_neg</code>: An integer vector with the count of negative cases in each bin.</p></li>
<li><p><code>cutpoints</code>: A numeric vector of cut points defining the bins.</p></li>
<li><p><code>converged</code>: A boolean indicating whether the algorithm converged.</p></li>
<li><p><code>iterations</code>: An integer with the number of iterations performed.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="core-steps-">Core Steps:<a class="anchor" aria-label="anchor" href="#core-steps-"></a></h3>

<ol><li><p><strong>Input Validation</strong>: Ensures feature and target are valid, numeric, and binary respectively. Validates consistency between <code>min_bins</code> and <code>max_bins</code>.</p></li>
<li><p><strong>Pre-Binning</strong>: Creates pre-bins based on equal frequencies or unique values if there are few observations.</p></li>
<li><p><strong>MDL-Based Merging</strong>: Iteratively merges bins to minimize the MDL cost, which combines model complexity and data fit quality.</p></li>
<li><p><strong>Rare Bin Handling</strong>: Merges bins with frequencies below the <code>bin_cutoff</code> threshold to ensure statistical stability.</p></li>
<li><p><strong>Monotonicity Enforcement</strong>: Adjusts bins to ensure that the WoE values are monotonically increasing or decreasing.</p></li>
<li><p><strong>Validation</strong>: Validates the final bin structure for consistency and correctness.</p></li>
</ol></div>

<div class="section">
<h3 id="mathematical-framework-">Mathematical Framework:<a class="anchor" aria-label="anchor" href="#mathematical-framework-"></a></h3>


<p><strong>Entropy Calculation</strong>: For a bin \( i \) with positive (\( p \)) and negative (\( n \)) counts:
$$Entropy = -p \log_2(p) - n \log_2(n)$$</p>
<p><strong>MDL Cost</strong>: Combines the cost of the model and data description. Lower MDL values indicate better binning.</p>
<p><strong>Weight of Evidence (WoE)</strong>: For a bin \( i \):
$$WoE_i = \ln\left(\frac{\text{Distribution of positives}_i}{\text{Distribution of negatives}_i}\right)$$</p>
<p><strong>Information Value (IV)</strong>: Summarizes predictive power across all bins:
$$IV = \sum_{i} (P(X|Y=1) - P(X|Y=0)) \times WoE_i$$</p>
</div>

<div class="section">
<h3 id="features-">Features:<a class="anchor" aria-label="anchor" href="#features-"></a></h3>

<ul><li><p>Merges bins iteratively to minimize the MDL cost.</p></li>
<li><p>Ensures monotonicity of WoE to improve model interpretability.</p></li>
<li><p>Handles rare bins by merging categories with low frequencies.</p></li>
<li><p>Stable against edge cases like all identical values or insufficient observations.</p></li>
<li><p>Efficiently processes large datasets with iterative binning and convergence checks.</p></li>
</ul></div>

<div class="section">
<h3 id="algorithm-parameters-">Algorithm Parameters:<a class="anchor" aria-label="anchor" href="#algorithm-parameters-"></a></h3>

<ul><li><p><code>min_bins</code>: Minimum number of bins (default: 3).</p></li>
<li><p><code>max_bins</code>: Maximum number of bins (default: 5).</p></li>
<li><p><code>bin_cutoff</code>: Minimum proportion of records required in a bin (default: 0.05).</p></li>
<li><p><code>max_n_prebins</code>: Maximum number of pre-bins before merging (default: 20).</p></li>
<li><p><code>convergence_threshold</code>: Threshold for convergence in terms of IV changes (default: 1e-6).</p></li>
<li><p><code>max_iterations</code>: Maximum number of iterations for optimization (default: 1000).</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example usage</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feature</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">optimal_binning_numerical_mdlp</span><span class="op">(</span><span class="va">target</span>, <span class="va">feature</span>, min_bins <span class="op">=</span> <span class="fl">3</span>, max_bins <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lopes J. E.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

