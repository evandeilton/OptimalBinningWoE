% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/obwoe.R
\name{OBSelectOptimalFeatures}
\alias{OBSelectOptimalFeatures}
\title{Select Optimal Features Based on Weight of Evidence}
\usage{
OBSelectOptimalFeatures(
  obresult,
  target,
  iv_threshold = 0.02,
  min_features = 5L,
  max_features = NULL
)
}
\arguments{
\item{obresult}{A list containing the result of the Optimal Binning and WoE analysis.
Must include elements 'woedt' (a data.table with WoE transformed data) and
'bestsreport' (a data.table with feature performance metrics).}

\item{target}{Character. The name of the target variable in the dataset.}

\item{iv_threshold}{Numeric. The minimum Information Value threshold for feature selection.
Features with IV below this threshold will be excluded. Default is 0.02.}

\item{min_features}{Integer. The minimum number of features to select, regardless of
their IV. If fewer features meet the IV threshold, this ensures a minimum
set is still selected. Default is 5.}

\item{max_features}{Integer or NULL. The maximum number of features to select.
If NULL (default), no maximum limit is applied.}
}
\value{
A list containing:
\item{data}{A data.table with the selected WoE features and the target variable.}
\item{selected_features}{A character vector of the selected WoE feature names.}
\item{feature_iv}{A data.table with all features and their total IV.}
\item{report}{A data.table summarizing the feature selection process.}
}
\description{
This function selects optimal features from the result of an Optimal Binning and
Weight of Evidence (WoE) analysis. It filters features based on their Information
Value (IV), allowing for fine-tuned feature selection for predictive modeling.
}
\details{
The function performs the following steps:
\enumerate{
\item Validates input parameters.
\item Extracts and sorts features by their Information Value.
\item Selects features based on the provided IV threshold.
\item Adjusts the selection to meet minimum and maximum feature count requirements.
\item Prepares a final dataset with selected WoE features and the target variable.
\item Generates a summary report of the selection process.
}

Mathematical Background:

Weight of Evidence (WoE) and Information Value (IV) are key concepts in predictive modeling,
especially in credit scoring. They are derived from information theory and provide a way to
measure the predictive power of an independent variable in relation to the dependent variable.

Let \eqn{Y} be a binary target variable and \eqn{X} be a predictor variable.

For a given bin \eqn{i} of \eqn{X}:

\deqn{P(X_i|Y=1) = \frac{\text{Number of events in bin i}}{\text{Total number of events}}}

\deqn{P(X_i|Y=0) = \frac{\text{Number of non-events in bin i}}{\text{Total number of non-events}}}

The Weight of Evidence for bin \eqn{i} is defined as:

\deqn{WoE_i = \ln\left(\frac{P(X_i|Y=1)}{P(X_i|Y=0)}\right)}

The Information Value for the entire variable \eqn{X} is:

\deqn{IV = \sum_{i} (P(X_i|Y=1) - P(X_i|Y=0)) \cdot WoE_i}

Interpretation of Information Value:\tabular{ll}{
   IV Range \tab Predictive Power \cr
   < 0.02 \tab Useless \cr
   0.02-0.1 \tab Weak \cr
   0.1-0.3 \tab Medium \cr
   0.3-0.5 \tab Strong \cr
   > 0.5 \tab Suspicious \cr
}


Note: An IV > 0.5 might indicate overfitting or data leakage and should be investigated.
}
\examples{
\dontrun{
# Assuming 'obwoe_result' is the output from an Optimal Binning and WoE analysis
result <- OBSelectOptimalFeatures(
  obresult = obwoe_result,
  target = "target_variable",
  iv_threshold = 0.05,
  min_features = 10,
  max_features = 30
)

# Access the final dataset with selected WoE features
final_dataset <- result$data

# View the selected WoE feature names
print(result$selected_features)

# View the feature selection summary report
print(result$report)
}

}
