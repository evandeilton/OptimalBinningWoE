% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_categorical_sblp}
\alias{optimal_binning_categorical_sblp}
\title{Optimal Binning for Categorical Variables using Similarity-Based Logistic Partitioning (SBLP)}
\usage{
optimal_binning_categorical_sblp(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  convergence_threshold = 1e-06,
  max_iterations = 1000L,
  bin_separator = ";"
)
}
\arguments{
\item{target}{Vetor inteiro binário (0 ou 1) representando a variável resposta.}

\item{feature}{Vetor de caracteres com as categorias da variável explicativa.}

\item{min_bins}{Número mínimo de bins (padrão: 3).}

\item{max_bins}{Número máximo de bins (padrão: 5).}

\item{bin_cutoff}{Proporção mínima de frequência para que uma categoria seja considerada um bin separado (padrão: 0.05).}

\item{max_n_prebins}{Número máximo de pré-bins antes do processo de partição (padrão: 20).}

\item{convergence_threshold}{Limite para convergência do algoritmo (padrão: 1e-6).}

\item{max_iterations}{Número máximo de iterações do algoritmo (padrão: 1000).}

\item{bin_separator}{Separador utilizado para concatenar nomes de categorias nos bins (padrão: ";").}
}
\value{
Uma lista contendo:
\itemize{
\item bin: Vetor de strings com os nomes dos bins (categorias concatenadas).
\item woe: Vetor numérico com os valores de Weight of Evidence (WoE) para cada bin.
\item iv: Vetor numérico com os valores de Information Value (IV) para cada bin.
\item count: Vetor inteiro com a contagem total de observações em cada bin.
\item count_pos: Vetor inteiro com a contagem de casos positivos (target=1) em cada bin.
\item count_neg: Vetor inteiro com a contagem de casos negativos (target=0) em cada bin.
\item converged: Valor lógico indicando se o algoritmo convergiu.
\item iterations: Número inteiro com a quantidade de iterações executadas.
}
}
\description{
Esta função realiza um binning ótimo para variáveis categóricas utilizando uma abordagem de Similarity-Based Logistic Partitioning (SBLP).
O objetivo é produzir bins que maximizem o Information Value (IV) e forneçam Weight of Evidence (WOE) consistentes, considerando taxas alvo
(target rates) e garantindo qualidade através de merges baseados em similaridade.
Foi feita uma revisão para melhorar legibilidade, eficiência, robustez e manutenção da compatibilidade
de nomes e tipos dos parâmetros de entrada/saída.
}
\details{
Passos do algoritmo SBLP:
\enumerate{
\item Validação de entrada e cálculo das contagens iniciais por categoria.
\item Tratamento de categorias raras, unindo-as com outras similares em termos de taxa alvo.
\item Garantia de número máximo de pré-bins, unindo bins pouco informativos.
\item Ordenação das categorias pela taxa alvo.
\item Aplicação de programação dinâmica para determinação da partição ótima, considerando min_bins e max_bins.
\item Ajuste da monotonicidade do WoE, se necessário, desde que o número de bins seja maior que min_bins.
\item Cálculo final do WoE e IV de cada bin, retornando o resultado.
}

Fórmulas-chave:
\deqn{WoE = \ln\left(\frac{P(X|Y=1)}{P(X|Y=0)}\right)}
\deqn{IV = \sum_{bins} (P(X|Y=1) - P(X|Y=0)) \times WoE}
}
\examples{
\dontrun{
set.seed(123)
target <- sample(0:1, 1000, replace = TRUE)
feature <- sample(LETTERS[1:5], 1000, replace = TRUE)
result <- optimal_binning_categorical_sblp(target, feature)
print(result)
}

}
