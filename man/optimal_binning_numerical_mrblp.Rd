% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_numerical_mrblp}
\alias{optimal_binning_numerical_mrblp}
\title{Optimal Binning for Numerical Variables using Monotonic Risk Binning with Likelihood Ratio Pre-binning (MRBLP)}
\usage{
optimal_binning_numerical_mrblp(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  convergence_threshold = 1e-06,
  max_iterations = 1000L
)
}
\arguments{
\item{target}{An integer vector of binary target values (0 or 1).}

\item{feature}{A numeric vector of the continuous feature to be binned.}

\item{min_bins}{Integer. The minimum number of bins to create (default: 3).}

\item{max_bins}{Integer. The maximum number of bins to create (default: 5).}

\item{bin_cutoff}{Numeric. The minimum proportion of observations in each bin (default: 0.05).}

\item{max_n_prebins}{Integer. The maximum number of pre-bins to create during the initial binning step (default: 20).}

\item{convergence_threshold}{Numeric. The threshold for convergence in the monotonic binning step (default: 1e-6).}

\item{max_iterations}{Integer. The maximum number of iterations for the monotonic binning step (default: 1000).}
}
\value{
A list containing the following elements:
\item{bins}{A character vector of bin ranges.}
\item{woe}{A numeric vector of Weight of Evidence (WoE) values for each bin.}
\item{iv}{A numeric vector of Information Value (IV) for each bin.}
\item{count}{An integer vector of the total count of observations in each bin.}
\item{count_pos}{An integer vector of the count of positive observations in each bin.}
\item{count_neg}{An integer vector of the count of negative observations in each bin.}
\item{cutpoints}{A numeric vector of cutpoints used to create the bins.}
\item{converged}{A logical value indicating whether the algorithm converged.}
\item{iterations}{An integer value indicating the number of iterations run.}
}
\description{
This function implements an optimal binning algorithm for numerical variables using
Monotonic Risk Binning with Likelihood Ratio Pre-binning (MRBLP). It transforms a
continuous feature into discrete bins while preserving the monotonic relationship
with the target variable and maximizing the predictive power.
}
\details{
The MRBLP algorithm combines pre-binning, small bin merging, and monotonic binning to create an optimal binning solution for numerical variables. The process involves the following steps:
\enumerate{
\item Pre-binning: The algorithm starts by creating initial bins using equal-frequency binning. The number of pre-bins is determined by the \code{max_n_prebins} parameter.
\item Small bin merging: Bins with a proportion of observations less than \code{bin_cutoff} are merged with adjacent bins to ensure statistical significance.
\item Monotonic binning: The algorithm enforces a monotonic relationship between the bin order and the Weight of Evidence (WoE) values. This step ensures that the binning preserves the original relationship between the feature and the target variable.
\item Bin count adjustment: If the number of bins exceeds \code{max_bins}, the algorithm merges bins with the smallest difference in Information Value (IV). If the number of bins is less than \code{min_bins}, the largest bin is split.
}

The algorithm includes additional controls to prevent instability and ensure convergence:
\itemize{
\item A convergence threshold is used to determine when the algorithm should stop iterating.
\item A maximum number of iterations is set to prevent infinite loops.
\item If convergence is not reached within the specified time and standards, the function returns the best result obtained up to the last iteration.
}
}
\examples{
\dontrun{
# Generate sample data
set.seed(42)
n <- 10000
feature <- rnorm(n)
target <- rbinom(n, 1, plogis(0.5 + 0.5 * feature))

# Run optimal binning
result <- optimal_binning_numerical_mrblp(target, feature)

# View binning results
print(result)
}

}
\references{
\itemize{
\item Belcastro, L., Marozzo, F., Talia, D., & Trunfio, P. (2020). "Big Data Analytics on Clouds."
In Handbook of Big Data Technologies (pp. 101-142). Springer, Cham.
\item Zeng, Y. (2014). "Optimal Binning for Scoring Modeling." Computational Economics, 44(1), 137-149.
}
}
\author{
Lopes, J.
}
