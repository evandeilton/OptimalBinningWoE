% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_numerical_mrblp}
\alias{optimal_binning_numerical_mrblp}
\title{Optimal Binning for Numerical Variables using Monotonic Risk Binning with Likelihood Ratio Pre-binning (MRBLP)}
\usage{
optimal_binning_numerical_mrblp(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  convergence_threshold = 1e-06,
  max_iterations = 1000L,
  laplace_smoothing = 0.5
)
}
\arguments{
\item{target}{An integer vector of binary target values (0 or 1).}

\item{feature}{A numeric vector of the continuous feature to be binned.}

\item{min_bins}{Integer. The minimum number of bins to create (default: 3).}

\item{max_bins}{Integer. The maximum number of bins to create (default: 5).}

\item{bin_cutoff}{Numeric. The minimum proportion of observations in each bin (default: 0.05).}

\item{max_n_prebins}{Integer. The maximum number of pre-bins to create during the initial binning step (default: 20).}

\item{convergence_threshold}{Numeric. The threshold for convergence in the monotonic binning step (default: 1e-6).}

\item{max_iterations}{Integer. The maximum number of iterations for the monotonic binning step (default: 1000).}

\item{laplace_smoothing}{Numeric. Smoothing parameter for WoE calculation (default: 0.5).}
}
\value{
A list containing the following elements:
\item{id}{Bin identifiers (1-based)}
\item{bin}{A character vector of bin ranges}
\item{woe}{A numeric vector of Weight of Evidence (WoE) values for each bin}
\item{iv}{A numeric vector of Information Value (IV) for each bin}
\item{count}{An integer vector of the total count of observations in each bin}
\item{count_pos}{An integer vector of the count of positive observations in each bin}
\item{count_neg}{An integer vector of the count of negative observations in each bin}
\item{event_rate}{A numeric vector with the proportion of positive cases in each bin}
\item{cutpoints}{A numeric vector of cutpoints used to create the bins}
\item{total_iv}{The total Information Value of all bins combined}
\item{converged}{A logical value indicating whether the algorithm converged}
\item{iterations}{An integer value indicating the number of iterations run}
}
\description{
This function implements an optimal binning algorithm for numerical variables using
Monotonic Risk Binning with Likelihood Ratio Pre-binning (MRBLP). It transforms a
continuous feature into discrete bins while preserving the monotonic relationship
with the target variable and maximizing the predictive power.
}
\details{
\subsection{Mathematical Framework:}{

\strong{Weight of Evidence (WoE)}: For a bin \code{i} with Laplace smoothing \code{alpha}:
\deqn{WoE_i = \ln\left(\frac{n_{1i} + \alpha}{n_{1} + m\alpha} \cdot \frac{n_{0} + m\alpha}{n_{0i} + \alpha}\right)}
Where:
\itemize{
\item \eqn{n_{1i}} is the count of positive cases in bin \(i\)
\item \eqn{n_{0i}} is the count of negative cases in bin \(i\)
\item \eqn{n_{1}} is the total count of positive cases
\item \eqn{n_{0}} is the total count of negative cases
\item \eqn{m} is the number of bins
\item \eqn{\alpha} is the Laplace smoothing parameter
}

\strong{Information Value (IV)}: Summarizes predictive power across all bins:
\deqn{IV = \sum_{i} (P(X|Y=1) - P(X|Y=0)) \times WoE_i}
}

\subsection{Algorithm Steps:}{
\enumerate{
\item \strong{Pre-binning}: Initial bins are created using equal-frequency binning.
\item \strong{Merge Small Bins}: Bins with frequency below the threshold are merged.
\item \strong{Enforce Monotonicity}: Bins that violate monotonicity in WoE are merged.
\item \strong{Adjust Bin Count}: Bins are merged/split to respect min_bins and max_bins.
\item \strong{Calculate Metrics}: Final WoE and IV values are computed with Laplace smoothing.
}
}
}
\examples{
\dontrun{
# Generate sample data
set.seed(42)
n <- 10000
feature <- rnorm(n)
target <- rbinom(n, 1, plogis(0.5 + 0.5 * feature))

# Run optimal binning
result <- optimal_binning_numerical_mrblp(target, feature)

# View binning results
print(result)

# Plot Weight of Evidence against bins
plot(result$woe, type = "b", xlab = "Bin", ylab = "WoE",
     main = "Weight of Evidence by Bin")
abline(h = 0, lty = 2)
}

}
\references{
\itemize{
\item Belcastro, L., Marozzo, F., Talia, D., & Trunfio, P. (2020). "Big Data Analytics on Clouds."
In Handbook of Big Data Technologies (pp. 101-142). Springer, Cham.
\item Zeng, Y. (2014). "Optimal Binning for Scoring Modeling." Computational Economics, 44(1), 137-149.
\item Good, I.J. (1952). "Rational Decisions." Journal of the Royal Statistical Society,
Series B, 14, 107-114. (Origin of Laplace smoothing/additive smoothing)
}
}
