% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_numerical_mrblp}
\alias{optimal_binning_numerical_mrblp}
\title{Optimal Binning for Numerical Variables using Monotonic Risk Binning with Likelihood Ratio Pre-binning (MRBLP)}
\usage{
optimal_binning_numerical_mrblp(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  n_threads = 1L
)
}
\arguments{
\item{target}{An integer vector of binary target values (0 or 1).}

\item{feature}{A numeric vector of the continuous feature to be binned.}

\item{min_bins}{Integer. The minimum number of bins to create (default: 3).}

\item{max_bins}{Integer. The maximum number of bins to create (default: 5).}

\item{bin_cutoff}{Numeric. The minimum proportion of observations in each bin (default: 0.05).}

\item{max_n_prebins}{Integer. The maximum number of pre-bins to create during the initial binning step (default: 20).}

\item{n_threads}{Integer. The number of threads to use for parallel processing (default: 1).}
}
\value{
A list containing two elements:
\item{woefeature}{A numeric vector of Weight of Evidence (WoE) transformed values for the input feature.}
\item{woebin}{A data frame containing the binning information, including bin boundaries, WoE values, Information Value (IV), and count statistics.}
}
\description{
This function implements an optimal binning algorithm for numerical variables using
Monotonic Risk Binning with Likelihood Ratio Pre-binning (MRBLP). It transforms a
continuous feature into discrete bins while preserving the monotonic relationship
with the target variable and maximizing the predictive power.
}
\details{
The MRBLP algorithm combines pre-binning, small bin merging, and monotonic binning to create an optimal binning solution for numerical variables. The process involves the following steps:
\enumerate{
\item Pre-binning: The algorithm starts by creating initial bins using equal-frequency binning. The number of pre-bins is determined by the \code{max_n_prebins} parameter.
\item Small bin merging: Bins with a proportion of observations less than \code{bin_cutoff} are merged with adjacent bins to ensure statistical significance.
\item Monotonic binning: The algorithm enforces a monotonic relationship between the bin order and the Weight of Evidence (WoE) values. This step ensures that the binning preserves the original relationship between the feature and the target variable.
\item Bin count adjustment: If the number of bins exceeds \code{max_bins}, the algorithm merges bins with the smallest difference in Information Value (IV). If the number of bins is less than \code{min_bins}, the largest bin is split.
}

The Weight of Evidence (WoE) for each bin is calculated as:

\deqn{WoE = \ln\left(\frac{P(X|Y=1)}{P(X|Y=0)}\right) = \ln\left(\frac{\frac{n_{1i}}{n_1}}{\frac{n_{0i}}{n_0}}\right)}

where \eqn{n_{1i}} and \eqn{n_{0i}} are the number of events and non-events in bin i, respectively, and \eqn{n_1} and \eqn{n_0} are the total number of events and non-events.

The Information Value (IV) for each bin is calculated as:

\deqn{IV_i = \left(\frac{n_{1i}}{n_1} - \frac{n_{0i}}{n_0}\right) \times WoE_i}

The total Information Value for the binning solution is the sum of IVs across all bins:

\deqn{IV_{total} = \sum_{i=1}^{k} IV_i}

where k is the number of bins.

This implementation uses OpenMP for parallel processing to improve performance on multi-core systems.
}
\examples{
\dontrun{
# Generate sample data
set.seed(42)
n <- 10000
feature <- rnorm(n)
target <- rbinom(n, 1, plogis(0.5 + 0.5 * feature))

# Run optimal binning
result <- optimal_binning_numerical_mrblp(target, feature)

# View binning results
print(result$woebin)

# Use WoE-transformed feature
woe_feature <- result$woefeature
}

}
\references{
\itemize{
\item Belcastro, L., Marozzo, F., Talia, D., & Trunfio, P. (2020). "Big Data Analytics on Clouds."
In Handbook of Big Data Technologies (pp. 101-142). Springer, Cham.
\item Zeng, Y. (2014). "Optimal Binning for Scoring Modeling." Computational Economics, 44(1), 137-149.
}
}
\author{
Lopes, J. E.
}
