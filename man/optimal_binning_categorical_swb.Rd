% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_categorical_swb}
\alias{optimal_binning_categorical_swb}
\title{Optimal Binning for Categorical Variables using Sliding Window Binning (SWB) (Refined)}
\usage{
optimal_binning_categorical_swb(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  bin_separator = "\%;\%",
  convergence_threshold = 1e-06,
  max_iterations = 1000L
)
}
\arguments{
\item{target}{Vetor inteiro binário (0 ou 1) da variável resposta.}

\item{feature}{Vetor de caracteres com as categorias da variável explicativa.}

\item{min_bins}{Número mínimo de bins (padrão: 3).}

\item{max_bins}{Número máximo de bins (padrão: 5).}

\item{bin_cutoff}{Freqüência mínima para considerar uma categoria como bin separado (padrão: 0.05).}

\item{max_n_prebins}{Número máximo de pré-bins antes da fusão (padrão: 20).}

\item{bin_separator}{Separador usado ao concatenar nomes de categorias em cada bin (padrão: "\%;\%").}

\item{convergence_threshold}{Limite para convergência do IV (padrão: 1e-6).}

\item{max_iterations}{Número máximo de iterações para otimização (padrão: 1000).}
}
\value{
Uma lista contendo:
\itemize{
\item bin: Vetor de strings com os nomes dos bins.
\item woe: Vetor numérico com valores de WOE para cada bin.
\item iv: Vetor numérico com valores de IV para cada bin.
\item count: Vetor inteiro com a contagem total em cada bin.
\item count_pos: Vetor inteiro com a contagem de positivos (target=1) em cada bin.
\item count_neg: Vetor inteiro com a contagem de negativos (target=0) em cada bin.
\item converged: Valor lógico indicando se o algoritmo convergiu.
\item iterations: Número inteiro indicando quantas iterações foram executadas.
}
}
\description{
Esta função realiza um binning ótimo de variáveis categóricas utilizando uma abordagem de Sliding Window Binning (SWB).
O objetivo é gerar bins com bom poder preditivo (IV) e monotonicidade no WoE, garantindo estabilidade, robustez,
e mantendo compatibilidade de nomes e tipos de entrada e saída. Caso a variável categórica tenha apenas 1 ou 2 níveis,
não será realizada a otimização, apenas o cálculo das estatísticas e retorno do resultado.
}
\details{
Passos do algoritmo SWB (ajustado):
\enumerate{
\item Inicializa bins para cada categoria, unindo categorias raras (abaixo do bin_cutoff).
\item Se a variável tiver apenas 1 ou 2 níveis, não otimiza, apenas calcula o WoE/IV e retorna.
\item Caso contrário, ordena bins pelo valor do WoE, e funde bins adjacentes conforme necessário, respeitando min_bins e max_bins.
\item Otimiza o número de bins visando monotonicidade do WoE e maximização do IV, evitando travar em caso de poucas classes.
}

Fórmulas principais:
\deqn{WOE = \ln\left(\frac{P(X|Y=1)}{P(X|Y=0)}\right)}
\deqn{IV = \sum (P(X|Y=1) - P(X|Y=0)) \times WOE}
}
\examples{
\dontrun{
set.seed(123)
target <- sample(0:1, 1000, replace = TRUE)
feature <- sample(LETTERS[1:5], 1000, replace = TRUE)
result <- optimal_binning_categorical_swb(target, feature)
print(result)
}

}
