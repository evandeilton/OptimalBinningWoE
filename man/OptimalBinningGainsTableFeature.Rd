% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{OptimalBinningGainsTableFeature}
\alias{OptimalBinningGainsTableFeature}
\title{Generate Gains Table for a Binned Feature}
\usage{
OptimalBinningGainsTableFeature(binned_df, target, group_var = "bin")
}
\arguments{
\item{binned_df}{A DataFrame containing the following columns, resulting from a binning process (e.g., using \code{OptimalBinningApplyWoENum} or \code{OptimalBinningApplyWoECat}):
\itemize{
\item \code{feature}: Original values of the variable.
\item \code{bin}: Bin label where the feature value was classified.
\item \code{woe}: Weight of Evidence associated with the bin.
\item \code{idbin}: Numeric bin identifier used to optimally order the bins.
}}

\item{target}{A numeric binary vector (0 and 1) representing the target. It must have the same length as \code{binned_df}.}

\item{group_var}{A string indicating which variable to use for grouping data and calculating metrics.
Options: \code{"bin"}, \code{"woe"}, or \code{"idbin"}. Default: \code{"idbin"}.}
}
\value{
A DataFrame containing, for each group (bin) defined by \code{group_var}, the following columns:
\itemize{
\item \code{group}: Name or value of the group selected by \code{group_var}.
\item \code{id}: Numeric bin identifier, ordered.
\item \code{count}: Total count of observations in the group.
\item \code{pos}: Count of positive cases (target=1) in the group.
\item \code{neg}: Count of negative cases (target=0) in the group.
\item \code{woe}: Weight of Evidence for the group, calculated as \eqn{WoE = ln\frac{P(X|Y=1)}{P(X|Y=0)}}.
\item \code{iv}: Contribution of the group to the Information Value: \eqn{IV = (P(X|Y=1)-P(X|Y=0))*WoE}.
\item \code{total_iv}: Total IV value, sum of the IV from all groups.
\item \code{cum_pos}, \code{cum_neg}: Cumulative counts of positive and negative cases up to the current group.
\item \code{pos_rate}, \code{neg_rate}: Positive and negative rates within the group.
\item \code{pos_perc}, \code{neg_perc}: Percentage of total positives/negatives represented by the group.
\item \code{count_perc}, \code{cum_count_perc}: Percentage of total observations and their cumulative percentage.
\item \code{cum_pos_perc}, \code{cum_neg_perc}: Cumulative percentage of positives/negatives relative to the total positives/negatives.
\item \code{cum_pos_perc_total}, \code{cum_neg_perc_total}: Cumulative percentage of positives/negatives relative to total observations.
\item \code{odds_pos}: Odds of positives in the group (\eqn{\frac{pos}{neg}}).
\item \code{odds_ratio}: Ratio of group odds to overall odds (\eqn{odds_{group}/odds_{total}}).
\item \code{lift}: \eqn{\frac{P(Y=1|X_{group})}{P(Y=1)}}.
\item \code{ks}: Kolmogorov-Smirnov statistic at the group level: \eqn{|F_1(i)-F_0(i)|}.
\item \code{gini_contribution}: Contribution of the bin to the Gini index, given by \eqn{P(X|Y=1)*F_0(i) - P(X|Y=0)*F_1(i)}.
\item \code{precision}: Precision for the group (\eqn{\frac{TP}{TP+FP}}), where TP = pos, FP = neg, considering the bin as "positive".
\item \code{recall}: \eqn{\frac{\sum_{j=1}^i TP_j}{\sum_{j=1}^n TP_j}}, cumulative percentage of true positives.
\item \code{f1_score}: \eqn{2 * \frac{Precision * Recall}{Precision + Recall}}.
\item \code{log_likelihood}: Log-likelihood for the group \eqn{LL = n_{pos} ln(p_i) + n_{neg} ln(1-p_i)}, with \eqn{p_i = pos_rate}.
\item \code{kl_divergence}: Kullback-Leibler divergence between the group distribution and the global distribution of positives.
\item \code{js_divergence}: Jensen-Shannon divergence between the group and global distributions, a symmetric and finite measure.
}
}
\description{
This function computes various statistical and performance metrics for a feature that has already been binned,
considering a binary target (0/1). It is useful for evaluating the quality of bins generated by
optimal binning methods. The calculated metrics include Weight of Evidence (WoE), Information Value (IV),
accuracy rates, information divergences, Kolmogorov-Smirnov (KS), Lift, and others.
}
\details{
The function organizes the bins defined by \code{group_var} and computes essential performance metrics
for the applied binning in a binary classification model. These metrics assist in evaluating the
bins' discrimination capability to separate positives from negatives and the information added by each bin to the model.
}
\examples{
\dontrun{
# Hypothetical example:
# Assume binned_df is the result of OptimalBinningApplyWoENum(...) and target is a 0/1 vector.
# gains_table <- OptimalBinningGainsTableFeature(binned_df, target, group_var = "idbin")
# print(gains_table)
}

}
\references{
\itemize{
\item Siddiqi, N. (2006). Credit Risk Scorecards: Developing and Implementing Intelligent Credit Scoring. John Wiley & Sons.
\item Hand, D. J., & Till, R. J. (2001). A Simple Generalisation of the Area Under the ROC Curve for Multiple Class Classification Problems. Machine Learning, 45(2), 171-186.
\item Kullback, S., & Leibler, R. A. (1951). On Information and Sufficiency. The Annals of Mathematical Statistics, 22(1), 79-86.
\item Lin, J. (1991). Divergence measures based on the Shannon entropy. IEEE Transactions on Information Theory, 37(1), 145-151.
}
}
