% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_categorical_jedi}
\alias{optimal_binning_categorical_jedi}
\title{Binning Ótimo Categórico JEDI (Discretização Conjunta Guiada por Entropia)}
\usage{
optimal_binning_categorical_jedi(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  bin_separator = "\%;\%",
  convergence_threshold = 1e-06,
  max_iterations = 1000L
)
}
\arguments{
\item{target}{Vetor inteiro binário (0 ou 1) representando a variável resposta}

\item{feature}{Vetor de caracteres dos valores categóricos preditores}

\item{min_bins}{Número mínimo de bins de saída (padrão: 3). Ajustado se categorias únicas < min_bins}

\item{max_bins}{Número máximo de bins de saída (padrão: 5). Deve ser >= min_bins}

\item{bin_cutoff}{Limite mínimo de frequência relativa para bins individuais (padrão: 0.05)}

\item{max_n_prebins}{Número máximo de pré-bins antes da otimização (padrão: 20)}

\item{bin_separator}{Delimitador para nomes de categorias combinadas (padrão: "\%;\%")}

\item{convergence_threshold}{Limite de diferença de IV para convergência (padrão: 1e-6)}

\item{max_iterations}{Máximo de iterações de otimização (padrão: 1000)}
}
\value{
Uma lista contendo:
\itemize{
\item bin: Vetor de caracteres com nomes dos bins (categorias concatenadas)
\item woe: Vetor numérico com valores de Weight of Evidence
\item iv: Vetor numérico com valores de Information Value por bin
\item count: Vetor inteiro com contagens de observações por bin
\item count_pos: Vetor inteiro com contagens da classe positiva por bin
\item count_neg: Vetor inteiro com contagens da classe negativa por bin
\item converged: Lógico indicando se o algoritmo convergiu
\item iterations: Contagem inteira de iterações de otimização realizadas
}
}
\description{
Um algoritmo robusto de binning categórico que otimiza o valor de informação (IV) mantendo
relações monotônicas de weight of evidence (WoE). Implementa uma estratégia adaptativa de
fusão com proteções de estabilidade numérica e controle sofisticado do número de bins.
}
\details{
O algoritmo emprega uma abordagem de otimização em múltiplas fases:

Framework Matemático:
Para um bin i, o WoE é calculado como:
\deqn{WoE_i = ln(\frac{p_i + \epsilon}{n_i + \epsilon})}
onde:
\itemize{
\item \eqn{p_i} é a proporção de casos positivos no bin i relativo ao total de positivos
\item \eqn{n_i} é a proporção de casos negativos no bin i relativo ao total de negativos
\item \eqn{\epsilon} é uma pequena constante (1e-10) para prevenir logaritmos indefinidos
}

O IV para cada bin é calculado como:
\deqn{IV_i = (p_i - n_i) \times WoE_i}

E o IV total é:
\deqn{IV_{total} = \sum_{i=1}^{k} IV_i}

Fases:
\enumerate{
\item Binning Inicial: Cria bins individuais para categorias únicas com validação de frequência
\item Tratamento de Baixa Frequência: Combina categorias raras (< bin_cutoff) para garantir estabilidade estatística
\item Otimização: Combina bins iterativamente usando minimização de perda de IV mantendo monotonicidade de WoE
\item Ajuste Final: Garante restrições de contagem de bins (min_bins <= bins <= max_bins) quando possível
}

Características Principais:
\itemize{
\item Cálculos de WoE protegidos por epsilon para estabilidade numérica
\item Estratégia adaptativa de fusão que minimiza perda de informação
\item Tratamento robusto de casos extremos e violações de restrições
\item Sem criação artificial de categorias, garantindo resultados interpretáveis
}

Controle de Quantidade de Bins:
\itemize{
\item Se bins > max_bins: Continua fusões usando minimização de perda de IV
\item Se bins < min_bins: Retorna melhor solução disponível em vez de criar divisões artificiais
}
}
\examples{
\dontrun{
# Uso básico
resultado <- optimal_binning_categorical_jedi(
  target = c(1,0,1,1,0),
  feature = c("A","B","A","C","B"),
  min_bins = 2,
  max_bins = 3
)

# Tratamento de categorias raras
resultado <- optimal_binning_categorical_jedi(
  target = vetor_target,
  feature = vetor_feature,
  bin_cutoff = 0.03,  # Tratamento mais agressivo de categorias raras
  max_n_prebins = 15  # Limite de bins iniciais
)
}

}
\references{
\itemize{
\item Framework de Binning Ótimo (Beltrami et al., 2021)
\item Teoria do Valor da Informação em Gestão de Risco (Thomas et al., 2002)
\item Algoritmos de Binning Monotônico em Credit Scoring (Mironchyk & Tchistiakov, 2017)
}
}
