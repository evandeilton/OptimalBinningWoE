% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_categorical_udt}
\alias{optimal_binning_categorical_udt}
\title{Optimal Binning for Categorical Variables using a User-Defined Technique (UDT) (Refined)}
\usage{
optimal_binning_categorical_udt(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  bin_separator = "\%;\%",
  convergence_threshold = 1e-06,
  max_iterations = 1000L
)
}
\arguments{
\item{target}{Integer binary vector (0 or 1) representing the response variable.}

\item{feature}{Character vector representing the categories of the explanatory variable.}

\item{min_bins}{Minimum number of desired bins (default: 3).}

\item{max_bins}{Maximum number of desired bins (default: 5).}

\item{bin_cutoff}{Minimum proportion of observations to consider an isolated category as a separate bin (default: 0.05).}

\item{max_n_prebins}{Maximum number of pre-bins before the main binning step (default: 20).}

\item{bin_separator}{String used to separate names of categories grouped in the same bin (default: "\%;\%").}

\item{convergence_threshold}{Threshold for stopping criteria based on IV convergence (default: 1e-6).}

\item{max_iterations}{Maximum number of iterations in the process (default: 1000).}
}
\value{
A list containing:
\itemize{
\item bins: String vector with bin names.
\item woe: Numeric vector with Weight of Evidence values for each bin.
\item iv: Numeric vector with Information Value for each bin.
\item count: Integer vector with the total count of observations in each bin.
\item count_pos: Integer vector with the count of positive cases (target=1) in each bin.
\item count_neg: Integer vector with the count of negative cases (target=0) in each bin.
\item converged: Logical value indicating if the algorithm converged.
\item iterations: Integer value indicating the number of executed iterations.
}
}
\description{
This function performs binning for categorical variables using a user-defined technique (UDT).
The goal is to produce bins with good informational value (IV) and monotonicity in WoE, avoiding the creation of artificial categories.
If the categorical variable has only 1 or 2 unique levels, no optimization is performed, and only statistics are calculated.
}
\details{
Steps of the algorithm (refined):
\enumerate{
\item Input validation and creation of initial bins, each corresponding to a category.
\itemize{
\item If there are only 1 or 2 levels, do not optimize, just calculate statistics and return.
}
\item Group low-frequency categories into an "Others" bin, if necessary.
\item Calculate WoE and IV for each bin.
\item Mergers and splits only occur if they can maintain consistency with the original categories. Artificial names like "no_split" are not created.
If it is not possible to split consistently (e.g., a bin with only one category), do not split.
\item WoE monotonicity is ensured at the end by ordering the bins by WoE.
\item The process iterates until convergence (difference in IV < convergence_threshold) or max_iterations.
}
}
\examples{
\dontrun{
set.seed(123)
target <- sample(0:1, 1000, replace = TRUE)
feature <- sample(LETTERS[1:5], 1000, replace = TRUE)
result <- optimal_binning_categorical_udt(target, feature)
print(result)
}

}
