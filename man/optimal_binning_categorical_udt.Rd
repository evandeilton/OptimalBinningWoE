% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_categorical_udt}
\alias{optimal_binning_categorical_udt}
\title{Optimal Binning for Categorical Variables using a User-Defined Technique (UDT) (Refined)}
\usage{
optimal_binning_categorical_udt(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  bin_separator = "\%;\%",
  convergence_threshold = 1e-06,
  max_iterations = 1000L
)
}
\arguments{
\item{target}{Vetor inteiro binário (0 ou 1) representando a variável resposta.}

\item{feature}{Vetor de caracteres representando as categorias da variável explicativa.}

\item{min_bins}{Número mínimo de bins desejado (padrão: 3).}

\item{max_bins}{Número máximo de bins desejado (padrão: 5).}

\item{bin_cutoff}{Proporção mínima de observações para considerar uma categoria isolada como um bin separado (padrão: 0.05).}

\item{max_n_prebins}{Número máximo de pré-bins antes da etapa principal de binning (padrão: 20).}

\item{bin_separator}{String usada para separar nomes de categorias unidas em um mesmo bin (padrão: "\%;\%").}

\item{convergence_threshold}{Limite para critério de parada baseado em convergência do IV (padrão: 1e-6).}

\item{max_iterations}{Número máximo de iterações do processo (padrão: 1000).}
}
\value{
Uma lista contendo:
\itemize{
\item bins: Vetor de strings com nomes dos bins.
\item woe: Vetor numérico com os valores de Weight of Evidence para cada bin.
\item iv: Vetor numérico com os valores de Information Value para cada bin.
\item count: Vetor inteiro com a contagem total de observações em cada bin.
\item count_pos: Vetor inteiro com a contagem de casos positivos (target=1) em cada bin.
\item count_neg: Vetor inteiro com a contagem de casos negativos (target=0) em cada bin.
\item converged: Valor lógico indicando se o algoritmo convergiu.
\item iterations: Número inteiro indicando quantas iterações foram executadas.
}
}
\description{
Esta função realiza o binning de variáveis categóricas seguindo uma técnica personalizada (UDT).
O objetivo é produzir bins com bom valor informativo (IV) e monotonicidade no WoE, evitando a criação de categorias artificiais.
Caso a variável categórica tenha apenas 1 ou 2 níveis únicos, nenhuma otimização é feita, apenas as estatísticas são calculadas.
}
\details{
Passos do algoritmo (ajustado):
\enumerate{
\item Validação da entrada e criação de bins iniciais, cada um correspondendo a uma categoria.
\itemize{
\item Se houver apenas 1 ou 2 níveis, não otimizar, apenas calcular estatísticas e retornar.
}
\item Agrupamento de categorias de baixa frequência em um bin "Others", se necessário.
\item Cálculo do WoE e IV de cada bin.
\item Fusões e divisões só acontecem se puderem manter coerência com as categorias originais. Não são criados nomes artificiais como "no_split".
Caso não seja possível dividir coerentemente (por exemplo, um bin com apenas uma categoria), não dividir.
\item Monotonicidade do WoE é assegurada ao final, ordenando-se os bins pelo WoE.
\item O processo itera até convergência (diferença no IV < convergence_threshold) ou max_iterations.
}
}
\examples{
\dontrun{
set.seed(123)
target <- sample(0:1, 1000, replace = TRUE)
feature <- sample(LETTERS[1:5], 1000, replace = TRUE)
result <- optimal_binning_categorical_udt(target, feature)
print(result)
}

}
