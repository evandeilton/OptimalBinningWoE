% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{optimal_binning_categorical_cm}
\alias{optimal_binning_categorical_cm}
\title{Optimal Binning for Categorical Variables (Refined)}
\usage{
optimal_binning_categorical_cm(
  target,
  feature,
  min_bins = 3L,
  max_bins = 5L,
  bin_cutoff = 0.05,
  max_n_prebins = 20L,
  bin_separator = "\%;\%",
  convergence_threshold = 1e-06,
  max_iterations = 1000L
)
}
\arguments{
\item{target}{Vetor inteiro com valores binários (0 ou 1) da variável resposta.}

\item{feature}{Vetor de caracteres com valores categóricos da variável explicativa.}

\item{min_bins}{Número mínimo de bins (default: 3).}

\item{max_bins}{Número máximo de bins (default: 5).}

\item{bin_cutoff}{Frequência mínima para um bin separado (default: 0.05).}

\item{max_n_prebins}{Número máximo de pré-bins antes do merging (default: 20).}

\item{bin_separator}{Separador para concatenar nomes de categorias em cada bin (default: "\%;\%").}

\item{convergence_threshold}{Limite para convergência da diferença de Qui-quadrado (default: 1e-6).}

\item{max_iterations}{Número máximo de iterações para mesclagem de bins (default: 1000).}
}
\value{
Uma lista contendo:
\itemize{
\item bin: Vetor com os nomes dos bins (categorias concatenadas).
\item woe: Vetor com os valores de Weight of Evidence de cada bin.
\item iv: Vetor com os valores de Information Value de cada bin.
\item count: Vetor com as contagens totais de cada bin.
\item count_pos: Vetor com as contagens de casos positivos (target=1) em cada bin.
\item count_neg: Vetor com as contagens de casos negativos (target=0) em cada bin.
\item converged: Booleano indicando se o algoritmo convergiu.
\item iterations: Número de iterações executadas.
}
}
\description{
Implementa binning ótimo para variáveis categóricas utilizando o algoritmo Chi-Merge,
calculando WoE (Weight of Evidence) e IV (Information Value) para os bins resultantes.
Este código foi aprimorado para melhor legibilidade, eficiência e robustez, mantendo a
compatibilidade de tipos e nomes de entrada/saída.
}
\details{
O algoritmo utiliza estatísticas de Qui-quadrado para mesclar bins adjacentes até atingir
max_bins ou não haver mais merges vantajosos. Após mesclar categorias raras, pré-binagem,
e assegurar min_bins, o código aplica monotonicidade no WoE, ajustando os bins conforme necessário.

Fórmulas:
\deqn{\chi^2 = \sum_{i=1}^{2}\sum_{j=1}^{2} \frac{(O_{ij} - E_{ij})^2}{E_{ij}}}
\deqn{WoE = \ln\left(\frac{P(X|Y=1)}{P(X|Y=0)}\right)}
\deqn{IV = (P(X|Y=1)-P(X|Y=0))*WoE}
}
\examples{
\dontrun{
target <- c(1, 0, 1, 1, 0, 1, 0, 0, 1, 1)
feature <- c("A", "B", "A", "C", "B", "D", "C", "A", "D", "B")
result <- optimal_binning_categorical_cm(target, feature, min_bins = 2, max_bins = 4)
print(result)
}

}
